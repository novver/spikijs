(()=>{"use strict";var e=(()=>{var n,t,E=Object,A=Array,P=Reflect,e=Promise,T=Map,k=Set,r=WeakMap,a=Node,L=document,N="length",C="value",S="push",$="forEach",l="indexOf",j="split",M="slice",O="call",R="get",W="set",q="add",z="delete",B="has",s="clear",D="prototype",F="hasOwnProperty",H="create",I="isArray",U="getAttribute",X="removeAttribute",G="hasAttribute",J="tagName",K="type",Q="name",u="checked",V="parentNode",Y="nextSibling",Z="replaceWith",ee="insertBefore",te="cloneNode",re="remove",ne="createTextNode",ae="addEventListener",o="dependencies",oe="cleanups",ie="nodes",se="context",i="scheduler",c=E[H](null),le=new r,f=new r,v=new r,p=new T,d=new k,ue=/^\s*(.*?)\s+in\s+(.+)\s*$/,y=!0,m=e.resolve(),_={};[S,"pop","shift","unshift","splice","sort","reverse"][$](r=>{_[r]=function(){for(var e=[],t=0;t<arguments[N];t++)e[t]=arguments[t];y=!1;try{return A[D][r].apply(this,e)}finally{y=!0,h(this,N)}}});var ce=(e,t)=>{if("string"!=typeof t)return{value:t,context:e};if(-1===t[l]("."))return{value:e?e[t]:void 0,context:e};var r=p[R](t);r||(1e3<p.size&&p[s](),r=t[j]("."),p[W](t,r));for(var n=e,a=e,o=0;o<r[N];o++){var i=r[o];if(null==n)return{value:n,context:null};n=(a=n)[i]}return{value:n,context:a}},fe=e=>!d[B](e)&&d[q](e)&&!t&&(t=!0)&&m.then(()=>{d[$](e=>e()),d[s](),t=!1}),ve=(e,t)=>{var r;n&&((r=f[R](e))||(r=new T,f[W](e,r)),(e=r[R](t))||(e=new k,r[W](t,e)),e[q](n),n[o][q](e))},h=(e,t)=>{var r,n;y&&(r=f[R](e))&&(n=r[R](t))&&n[$](e=>{e[i]?e[i](e):e()})},pe=(t,e)=>{var r=()=>{r[o][$](e=>e[z](r)),r[o][s]();var e=n;n=r;try{t()}finally{n=e}};return r[o]=new k,r[i]=e,r(),()=>{r[o][$](e=>e[z](r)),r[o][s](),d[z](r)}},g=e=>{if(!e||"object"!=typeof e||e._ip||e instanceof a)return e;var t=v[R](e);return t||(t=new Proxy(e,{get:(e,t,r)=>"_r"===t?e:"_ip"===t||(A[I](e)&&_[F](t)?_[t]:(ve(e,t),!(r=P[R](e,t,r))||"object"!=typeof r||r instanceof a?r:g(r))),set:(e,t,r,n)=>{var a=e[t],o=A[I](e)?Number(t)<e[N]:E[D][F][O](e,t),n=P[W](e,t,r,n);return y&&(o?a!==r&&h(e,t):(h(e,t),A[I](e)&&h(e,N))),n},deleteProperty:(e,t)=>{var r=E[D][F][O](e,t),n=P.deleteProperty(e,t);return n&&r&&(h(e,t),A[I](e)&&h(e,N)),n}}),v[W](e,t),t)},w=g({}),de={text:(e,t)=>{e.textContent=null!=t?t:""},html:(e,t)=>{e.innerHTML=null!=t?t:""},value:(e,t)=>{"checkbox"===e[K]?e[u]=!!t:"radio"===e[K]&&e[Q]?e[u]=e[C]==t:e[C]!=t&&(e[C]=null!=t?t:"")},attr:(e,t,r)=>{null==t||!1===t?e[X](r):e.setAttribute(r,!0===t?"":t)},class:(r,e)=>{"string"==typeof e&&e[j](/\s+/)[$](e=>{var t;e&&(e=(t="!"===e[0])?e[M](1):e,r.classList[t?re:q](e))})},init:()=>{},destroy:()=>{}},ye=p=>{if(!p._im){p._im=1;var e=p[U]("s-data");if(e=c[e]){var d=g(e());d.$refs={},d.$root=p,d.$store=w;var t=[],b=e=>{var t,r,n,a,o=e.target;for(!o._m||"input"!==e[K]&&"change"!==e[K]||(n=o._m,t="checkbox"===o[K]?o[u]:o[C],r=ce(o._s||d,n)[se],-1===n[l](".")?(o._s||d)[n]=t:r&&(r[(n=n[j]("."))[n[N]-1]]=t));o&&o!==p[V];){var i,s=le[R](o);s&&(a=s[e[K]])&&(s=(i=ce(o._s||d,a))[C],i=i[se],"function"==typeof s&&s[O](i,e)),o=o[V]}},x=(y,m,o)=>{if(1===y.nodeType&&!y[G]("s-ignore"))if(y!==p&&y[G]("s-data"))(t=ye(y))&&o[S](t.unmount);else{var r;if(r=y[U]("s-if")){var n,a=L[ne](""),i=[];return y[Z](a),o[S](()=>{i[$](e=>e())}),o[S](pe(()=>{var e=(t=ce(m,r))[C],t=t[se];("function"==typeof e?e[O](t,y):e)?n||((n=y[te](!0))[X]("s-if"),x(n,m,i),a[V][ee](n,a)):n&&(i[$](e=>e()),i[N]=0,n[re](),n=null)},fe))}if("TEMPLATE"===y[J]&&(r=y[U]("s-for"))){var e=r.match(ue);if(!e)return;var t=e[1].replace(/[()]/g,""),s=e[2],_=(t=t[j](","))[0].trim(),h=t[1]?t[1].trim():null,g=y[U]("s-key"),l=L[ne]("");y[Z](l);var w=new T;return o[S](()=>{w[$](e=>{e[oe][$](e=>e())})}),o[S](pe(()=>{var v=ce(m,s)[C];A[I](v)&&ve(v,N);var p=l,e=A[I](v)?v:v?E.keys(v):[],d=new T;e[$]((e,t)=>{var r,n,a=A[I](v)?t:e,o=A[I](v)?e:v[e],i=g&&o?o[g]:"object"==typeof o&&o?o:a+"_"+o,e=e=>{E.defineProperty(e,_,{configurable:!0,enumerable:!0,get:()=>v[a],set:e=>{v[a]=e}})};if(t=w[R](i))e(t.scope),h&&(t.scope[h]=a);else{var o=y.content[te](!0),s=(n=m,n=E[H](n),new Proxy(n,{set:(e,t,r,n)=>{if(e[F](t))return P[W](e,t,r,n);for(var a=e;a&&!E[D][F][O](a,t);)a=E.getPrototypeOf(a);return P[W](a||e,t,r)}})),l=[];e(s),h&&(s[h]=a);for(var u=[],c=o.firstChild;c;){u[S](c);var f=c[Y];x(c,s,l),c=f}t={nodes:u,scope:s,cleanups:l}}t[ie][0]!==p[Y]&&(r=L.createDocumentFragment(),t[ie][$](e=>r.appendChild(e)),p[V][ee](r,p[Y])),p=t[ie][t[ie][N]-1],d[W](i,t),w[z](i)}),w[$](e=>{e[oe][$](e=>e()),e[ie][$](e=>e[re]())}),w=d},fe))}for(var u=y.attributes,c=u[N]-1;0<=c;c--)(e=>{var r,t,n=e[Q],a=e[C];":"===n[0]?o[S](pe(()=>{var e=(r=ce(m,a))[C],t=r[se],r="class"===n[M](1)?"class":"attr";de[r](y,"function"==typeof e?e[O](t,y):e,n[M](1))},fe)):"s"===n[0]&&"-"===n[1]&&("ref"===(r=n[M](2))?d.$refs[a]=y:"model"===r?(o[S](pe(()=>{var e=ce(m,a);de[C](y,e[C])},fe)),/^(INPUT|SELECT|TEXTAREA)$/.test(y[J])&&(y._s=m,y._m=a,t="checkbox"===y[K]||"radio"===y[K]||"SELECT"===y[J]?"change":"input",p._le||(p._le=new k),p._le[B](t)||(p._le[q](t),p[ae](t,b)))):de[r]?o[S](pe(()=>{var e=(t=ce(m,a))[C],t=t[se];de[r](y,"function"==typeof e?e[O](t,y):e)},fe)):(y._s=m,(t=le[R](y))||(t={},le[W](y,t)),t[r]=a,p._le||(p._le=new k),p._le[B](r)||(p._le[q](r),p[ae](r,b))))})(u[c]);for(var f=y.firstElementChild;f;){var v=f.nextElementSibling;x(f,m,o),f=v}}};return x(p,d,t),d.init&&d.init(),{unmount:()=>{d.destroy&&d.destroy[O](d),t[$](e=>e()),p._le&&p._le[$](e=>{p.removeEventListener(e,b)}),p._im=0}}}}};return{data:(e,t)=>{c[e]=t},start:()=>{for(var e=L.querySelectorAll("[s-data]"),t=0;t<e[N];t++)ye(e[t])},store:(e,t)=>void 0===t?w[e]:w[e]=t,raw:e=>e&&e._r||e}})();window.spiki=e})();
