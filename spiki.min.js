(()=>{"use strict";var e=(()=>{var S=Object,L=Array,f=Reflect,e=Promise,a=Node,T=document,i=console,$="length",k="value",O="push",q="forEach",s="indexOf",C="split",M="slice",j="call",R="prototype",v="hasOwnProperty",p="getPrototypeOf",n="defineProperty",B="create",D="isArray",F="getAttribute",H="removeAttribute",W="hasAttribute",z="tagName",G="type",I="name",o="checked",J="parentNode",K="nextSibling",r="textContent",l="innerHTML",Q="replaceWith",U="insertBefore",V="cloneNode",X="remove",Y="createTextNode",Z="checkbox",ee="function",te="object",re="cleanups",ae="nodes",ne="context",u="scheduler",c="deps",d="className",m="destroy",g=S[B](null),h=[],_=!1,y=null,b=!0,t=e.resolve(),oe=/^\s*(.*?)\s+in\s+(.+)\s*$/,ie=e=>{e._q||(e._q=!0,h[O](e),_||(_=!0,t.then(()=>{var e=h[M]();h[$]=0,_=!1;for(var t=0;t<e[$];t++)e[t]._q=!1,e[t]()})))},se=(e,t)=>{if(-1===t[s]("."))return{value:e[t],context:e};for(var r=t[C]("."),a=e,n=e,o=0;o<r[$];o++){if(null==a)return i.warn("Property undefined: "+t),{value:void 0,context:null};a=(n=a)[r[o]]}return{value:a,context:n}},x={};[O,"pop","shift","unshift","splice","sort","reverse"][q](e=>{x[e]=function(){b=!1;try{return L[R][e].apply(this,arguments)}finally{b=!0,P(this,$)}}});var le=(e,t)=>{var r;y&&((r=e._d)||(S[n](e,"_d",{value:S[B](null),writable:!0}),r=e._d),-1===(t=r[t]||(r[t]=[]))[s](y)&&(t[O](y),y[c][O](t)))},P=(e,t)=>{if(b&&e._d&&e._d[t])for(var r=e._d[t][M](),a=0;a<r[$];a++){var n=r[a];n[u]?n[u](n):n()}},A=e=>{if(e[c]){for(var t=0;t<e[c][$];t++){var r=e[c][t],a=r[s](e);-1!==a&&(r[a]=r[r[$]-1],r.pop())}e[c][$]=0}},fe=(t,e)=>{var r=()=>{A(r);var e=y;y=r;try{t()}finally{y=e}};return r[c]=[],r[u]=e,r(),()=>A(r)},ve=e=>{if(!e||typeof e!=te||e._y||e instanceof a)return e;if(e._p)return e._p;var t=new Proxy(e,{get:(e,t,r)=>"_r"===t?e:"_y"===t||("_d"===t?e._d:L[D](e)&&x[v](t)?x[t]:(le(e,t),!(r=f.get(e,t,r))||typeof r!=te||r instanceof a?r:ve(r))),set:(e,t,r,a)=>{var n=e[t],o=L[D](e),i=o?Number(t)<e[$]:S[R][v][j](e,t);if(!o&&!i)for(var s=S[p](e);s&&s!==S[R];){if(S[R][v][j](s,t)){var l=f.set(s,t,r);return b&&r!==n&&P(e,t),l}s=S[p](s)}return l=f.set(e,t,r,a),b&&l&&(i&&r===n||(P(e,t),o&&P(e,$))),l},deleteProperty:(e,t)=>{var r=S[R][v][j](e,t),a=f.deleteProperty(e,t);return a&&r&&(P(e,t),L[D](e)&&P(e,$)),a}});return S[n](e,"_p",{value:t,enumerable:!1}),t},E=ve({}),pe={text:(e,t)=>{t=null==t?"":t,e[r]!==t&&(e[r]=t)},html:(e,t)=>{t=null==t?"":t,e[l]!==t&&(e[l]=t)},value:(e,t)=>{if(e[G]===Z)e[o]=!!t;else if("radio"===e[G])e[o]=e[k]==t;else if(t=null==t?"":t,e[k]!=t){var r=e.selectionStart,a=e.selectionEnd;if(e[k]=t,T.activeElement===e)try{e.setSelectionRange(r,a)}catch(e){}}},attr:(e,t,r)=>{null==t||!1===t?e[H](r):e.setAttribute(r,!0===t?"":t)},class:(e,t)=>{if("string"==typeof t)e[d]!==t&&(e[d]=t);else if(t)for(var r in t)e.classList.toggle(r,!!t[r])}},ue=(h,e)=>{if(!h._m){h._m=!0;var t=h[F]("s-data");if(t=g[t]){t=t(),e&&S.setPrototypeOf(t,e);var _=ve(t);_.$refs={},_.$root=h,_.$store=E,_.$parent=e;var r=[],a=S[B](null),n=e=>{for(var t=e.target;t&&t!==h[J];){var r,a,n=t._h&&t._h[e[G]];n&&(n.isModel?(r=t[G]===Z?t[o]:t[k],(a=se(t._s,n.path))[ne]&&(-1===n.path[s](".")?a[ne][n.path]=r:a[ne][n.path[C](".").pop()]=r)):typeof(a=se(t._s,n.path))[k]==ee&&a[k][j](a[ne],e)),t=t[J]}},y=e=>{a[e]||(a[e]=!0,h.addEventListener(e,n))},w=(m,g,e)=>{if(1===m.nodeType&&!m[W]("s-ignore"))if(m!==h&&m[W]("s-data"))(c=ue(m,g))&&e[O](c.unmount);else{var t=m[F]("s-if"),r=!t&&"TEMPLATE"===m[z]&&m[F]("s-for");if(t){var b=T[Y]("");m[Q](b);var a,n=[];return e[O](()=>n[q](e=>e())),e[O](fe(()=>{se(g,t)[k]?a||((a=m[V](!0))[H]("s-if"),w(a,g,n),b[J][U](a,b)):a&&(n[q](e=>e()),n[$]=0,a[X](),a=null)},ie))}if(r){var o=r.match(oe);if(o){var x=(r=o[1][C](",").map(e=>e.trim().replace(/[()]/g,"")))[0],P=r[1],A=o[2].trim(),E=m[F]("s-key"),b=T[Y]("");m[Q](b);var N=S[B](null);return e[O](()=>{for(var e in N)N[e][re][q](e=>e())}),e[O](fe(()=>{var e=se(g,A)[k]||[];L[D](e)&&le(e,$);for(var t,r=T.createDocumentFragment(),a=S[B](null),n=L[D](e),o=n?e:S.keys(e),i=b,s=(n?e:o)[$],l=0;l<s;l++){var f=n?l:o[l],v=n?e[l]:e[f],p=E&&v?v[E]:n?String(f)+"_"+(typeof v==te?"o":String(v)):f,u=N[p];if(u)u.scope[x]=v,P&&(u.scope[P]=f);else{var c=m.content[V](!0),d=ve(S[B](g));d[x]=v,P&&(d[P]=f);for(var h=[],_=L[R][M][j](c.childNodes),y=0;y<_[$];y++)w(_[y],d,h);u={nodes:_,scope:d,cleanups:h}}if(u[ae][0]!==i[K]){for(y=0;y<u[ae][$];y++)r.appendChild(u[ae][y]);i[J][U](r,i[K])}i=u[ae][u[ae][$]-1],a[p]=u,N[p]&&delete N[p]}for(t in N)for(N[t][re][q](e=>e()),y=0;y<N[t][ae][$];y++)N[t][ae][y][X]();N=a},ie))}}else{if(m.hasAttributes()){for(var i=[],s=m.attributes,l=s[$],f=0;f<l;f++){var v,p=s[f][I],u=s[f][k];":"===p[0]?i[O]({type:"attr",name:p[M](1),path:u}):"s"!==p[0]||"-"!==p[1]||"data"!==(v=p[M](2))&&(v in pe?i[O]({type:v,path:u}):"model"===v?(i[O]({type:k,path:u}),m._t=u,m._s=g,m._h||(m._h={}),p=m[G]===Z||"radio"===m[G]||"SELECT"===m[z]?"change":"input",m._h[p]={isModel:!0,path:u},y(p)):"ref"===v?_.$refs[u]=m:(m._s=g,m._h||(m._h={}),m._h[v]={path:u},y(v)))}i[$]&&e[O](fe(()=>{for(var e=0;e<i[$];e++){var t=i[e],r=(r=se(g,t.path))[k]&&typeof r[k]==ee?r[k][j](r[ne],m):r[k];"attr"===t[G]?"class"===t[I]?pe.class(m,r):pe.attr(m,r,t[I]):pe[t[G]](m,r)}},ie))}for(var c=m.firstChild;c;){var d=c[K];w(c,g,e),c=d}}}};return w(h,_,r),_.init&&_.init(),{unmount:()=>{for(var e in _[m]&&_[m][j](_),r[q](e=>e()),a)h.removeEventListener(e,n);h._m=!1}}}}};return{data:(e,t)=>{g[e]=t},start:()=>{for(var e=T.querySelectorAll("[s-data]"),t=0;t<e[$];t++)ue(e[t])},store:(e,t)=>void 0===t?E[e]:E[e]=t,raw:e=>e&&e._r||e}})();window.spiki=e})();
