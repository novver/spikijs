(()=>{"use strict";var e=(()=>{var n,r,A=Object,x=Array,k=Reflect,e=Promise,E=Map,P=Set,t=WeakMap,T="length",N="slice",L="split",C="push",S="forEach",$="delete",o="clear",O="add",j="has",M="get",R="set",W="value",q="input",z="change",B="parentNode",D="nextSibling",F="prototype",H="hasOwnProperty",I="getAttribute",U="removeAttribute",X="addEventListener",G="insertBefore",J="replaceWith",K="remove",Q="createTextNode",V="cloneNode",Y="tagName",Z="s-data",ee="s-if",a=A.create(null),re=new t,i=new t,s=new t,l=new E,c=new P,te=/^\s*(.*?)\s+in\s+(.+)\s*$/,v=!0,f=e.resolve(),u={};[C,"pop","shift","unshift","splice","sort","reverse"][S](function(t){u[t]=function(){for(var e=[],r=arguments[T];r--;)e[r]=arguments[r];v=!1;try{return x[F][t].apply(this,e)}finally{v=!0,y(this,T)}}});var ne=(e,r)=>{if("string"!=typeof r)return{v:r,c:e};if(-1===r.indexOf("."))return{v:e?e[r]:void 0,c:e};var t=l[M](r);t||(1e3<l.size&&l[o](),t=r[L]("."),l[R](r,t));for(var n=e,a=e,i=0;i<t[T];i++){if(null==n)return{v:n,c:null};n=(a=n)[t[i]]}return{v:n,c:a}},ae=e=>!c[j](e)&&c[O](e)&&!r&&(r=!0)&&f.then(()=>{c[S](e=>e()),c[o](),r=!1}),ie=(e,r)=>{var t;n&&((t=i[M](e))||i[R](e,t=new E),(e=t[M](r))||t[R](r,e=new P),e[O](n),n.d[O](e))},y=(e,r)=>{var t,n;v&&(t=i[M](e))&&(n=t[M](r))&&n[S](e=>e.x?e.x(e):e())},oe=(r,e)=>{var t=()=>{t.d[S](e=>e[$](t)),t.d[o]();var e=n;n=t;try{r()}finally{n=e}};return t.d=new P,t.x=e,t(),()=>{t.d[S](e=>e[$](t)),t.d[o](),c[$](t)}},p=e=>{if(!e||"object"!=typeof e||e._p||e instanceof Node)return e;var r=s[M](e);return r||(r=new Proxy(e,{get:(e,r,t)=>"_p"===r||(x.isArray(e)&&A[F][H].call(u,r)?u[r]:(ie(e,r),!(t=k[M](e,r,t))||"object"!=typeof t||t instanceof Node?t:p(t))),set:(e,r,t,n)=>{var a=e[r],i=x.isArray(e)?Number(r)<e[T]:A[F][H].call(e,r),n=k[R](e,r,t,n);return v&&(i?a!==t&&y(e,r):(y(e,r),x.isArray(e)&&y(e,T))),n},deleteProperty:(e,r)=>{var t=A[F][H].call(e,r),n=k.deleteProperty(e,r);return n&&t&&(y(e,r),x.isArray(e)&&y(e,T)),n}}),s[R](e,r),r)},m=p({}),se={text:(e,r)=>{e.textContent=null!=r?r:""},html:(e,r)=>{e.innerHTML=null!=r?r:""},value:(e,r)=>{"checkbox"===e.type?e.checked=!!r:"radio"===e.type&&e.name?e.checked=e[W]==r:e[W]!=r&&(e[W]=null!=r?r:"")},attr:(e,r,t)=>{null==r||!1===r?e[U](t):e.setAttribute(t,!0===r?"":r)},class:(r,e)=>{"string"==typeof e&&e[L](/\s+/)[S](e=>{e&&r.classList["!"===e[0]?K:O]("!"===e[0]?e[N](1):e)})},init:()=>{},destroy:()=>{}},le=u=>{if(!u._m){u._m=1;var e=a[u[I](Z)];if(e){var y=p(e());y.$refs={},y.$root=u,y.$store=m;var r=[],d=e=>{var r,t,n,a,i=e.target;for(!i._m||e.type!==q&&e.type!==z||(n=i._m,r="checkbox"===i.type?i.checked:i[W],t=ne(i._s||y,n),-1===n.indexOf(".")?(i._s||y)[n]=r:t.c&&(n=n[L]("."),t.c[n[n[T]-1]]=r));i&&i!==u[B];){var o=re[M](i);o&&(a=o[e.type])&&"function"==typeof(o=ne(i._s||y,a)).v&&o.v.call(o.c,e),i=i[B]}},b=(p,m,i)=>{if(1===p.nodeType&&!p[I]("s-ignore"))if(p!==u&&p[I](Z))(o=le(p))&&i[C](o.unmount);else{var r;if(r=p[I](ee)){var t,n=document[Q](""),a=[];return p[J](n),i[C](()=>{a[S](e=>e())}),i[C](oe(()=>{var e=ne(m,r);("function"==typeof e.v?e.v.call(e.c,p):e.v)?t||((t=p[V](!0))[U](ee),b(t,m,a),n[B][G](t,n)):t&&(a[S](e=>e()),a[T]=0,t[K](),t=null)},ae))}if("TEMPLATE"===p[Y]&&(r=p[I]("s-for"))){var e=r.match(te);if(!e)return;var o=e[1].replace(/[()]/g,"")[L](","),s=e[2],_=o[0].trim(),h=o[1]?o[1].trim():null,g=p[I]("s-key"),n=document[Q]("");p[J](n);var w=new E;return i[C](()=>{w[S](e=>e.k[S](e=>e()))}),i[C](oe(()=>{var u=ne(m,s).v;x.isArray(u)&&ie(u,T);var y=n,e=x.isArray(u)?u:u?A.keys(u):[],d=new E;e[S]((e,r)=>{var t,n,a=x.isArray(u)?r:e,i=x.isArray(u)?e:u[e],o=g&&i?i[g]:"object"==typeof i&&i?i:a+"_"+i,e=e=>{A.defineProperty(e,_,{configurable:!0,enumerable:!0,get:()=>u[a],set:e=>{u[a]=e}})};if(r=w[M](o))e(r.s),h&&(r.s[h]=a);else{var i=p.content[V](!0),s=(n=m,n=A.create(n),new Proxy(n,{set:(e,r,t,n)=>{if(A[F][H].call(e,r))return k[R](e,r,t,n);for(var a=e;a&&!A[F][H].call(a,r);)a=A.getPrototypeOf(a);return k[R](a||e,r,t)}})),l=[];e(s),h&&(s[h]=a);for(var c=[],v=i.firstChild;v;){c[C](v);var f=v[D];b(v,s,l),v=f}r={n:c,s:s,k:l}}r.n[0]!==y[D]&&(t=document.createDocumentFragment(),r.n[S](e=>t.appendChild(e)),y[B][G](t,y[D])),y=r.n[r.n[T]-1],d[R](o,r),w[$](o)}),w[S](e=>{e.k[S](e=>e()),e.n[S](e=>e[K]())}),w=d},ae))}for(var l=p.attributes,c=l[T]-1;0<=c;c--)(e=>{var r,t,n=e.name,a=e[W];":"===n[0]?i[C](oe(()=>{var e=ne(m,a);se["class"===n[N](1)?"class":"attr"](p,"function"==typeof e.v?e.v.call(e.c,p):e.v,n[N](1))},ae)):"s"===n[0]&&"-"===n[1]&&("ref"===(r=n[N](2))?y.$refs[a]=p:"model"===r?(i[C](oe(()=>{se.value(p,ne(m,a).v)},ae)),/^(INPUT|SELECT|TEXTAREA)$/.test(p[Y])&&(p._s=m,p._m=a,t="checkbox"===p.type||"radio"===p.type||"SELECT"===p[Y]?z:q,u._e||(u._e=new P),u._e[j](t)||(u._e[O](t),u[X](t,d)))):se[r]?i[C](oe(()=>{var e=ne(m,a);se[r](p,"function"==typeof e.v?e.v.call(e.c,p):e.v)},ae)):(p._s=m,(t=re[M](p))||re[R](p,t={}),t[r]=a,u._e||(u._e=new P),u._e[j](r)||(u._e[O](r),u[X](r,d))))})(l[c]);for(var v=p.firstElementChild;v;){var f=v.nextElementSibling;b(v,m,i),v=f}}};return b(u,y,r),y.init&&y.init(),{unmount:()=>{y.destroy&&y.destroy.call(y),r[S](e=>e()),u._e&&u._e[S](e=>u.removeEventListener(e,d)),u._m=0}}}}};return{data:(e,r)=>{a[e]=r},start:()=>{for(var e=document.querySelectorAll("["+Z+"]"),r=0;r<e[T];r++)le(e[r])},store:(e,r)=>void 0===r?m[e]:m[e]=r}})();window.spiki=e})();
