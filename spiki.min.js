(()=>{"use strict";var e=(()=>{var k=Object,O=Array,i=Reflect,e=Promise,a=Node,q=document,C="length",S="value",b="push",j="forEach",u="indexOf",g="split",M="slice",B="call",D="prototype",f="hasOwnProperty",n="defineProperty",F="create",H="isArray",R="getAttribute",W="removeAttribute",z="hasAttribute",o="classList",G="tagName",I="type",J="name",l="checked",K="parentNode",Q="nextSibling",t="textContent",s="innerHTML",U="replaceWith",V="insertBefore",X="cloneNode",Y="remove",Z="createTextNode",ee="input",re="change",te="checkbox",ae="function",ne="object",v="pop",oe="trim",se="cleanups",le="nodes",ie="context",d="scheduler",p=k[F](null),c=[],_=!1,y=null,h=!0,r=e.resolve(),ue=/^\s*(.*?)\s+in\s+(.+)\s*$/,m={};[b,v,"shift","unshift","splice","sort","reverse"][j](e=>{m[e]=function(){h=!1;try{return O[D][e].apply(this,arguments)}finally{h=!0,x(this,C)}}});var fe=(e,r)=>{var t;y&&((t=e._d)||(k[n](e,"_d",{value:k[F](null),writable:!0,configurable:!0}),t=e._d),(e=t[r])||(t[r]=e=[]),-1===e[u](y)&&(e[b](y),y.deps[b](e)))},x=(e,r)=>{if(h&&e._d&&(r=e._d[r]))for(var t=r[M](),a=t[C],n=0;n<a;n++){var o=t[n];o[d]?o[d](o):o()}},ve=(s,e)=>{var l=()=>{if(l.deps){for(var e=l.deps[C],r=0;r<e;r++){var t,a=l.deps[r],n=a[u](l);-1!==n&&(n!==(t=a[C]-1)&&(a[n]=a[t]),a[v]())}l.deps[C]=0}else l.deps=[];var o=y;y=l;try{s()}finally{y=o}};return l[d]=e,l(),()=>{if(l.deps)for(var e=l.deps[C],r=0;r<e;r++){var t,a=l.deps[r],n=a[u](l);-1!==n&&(n!==(t=a[C]-1)&&(a[n]=a[t]),a[v]())}}},de=e=>{if(!e||typeof e!=ne||e._y||e instanceof a)return e;if(e._p)return e._p;var r=new Proxy(e,{get:(e,r,t)=>"_r"===r?e:"_y"===r||("_d"===r?e._d:O[H](e)&&m[f](r)?m[r]:(fe(e,r),!(t=i.get(e,r,t))||typeof t!=ne||t instanceof a?t:de(t))),set:(e,r,t,a)=>{var n=e[r],o=O[H](e),s=o?Number(r)<e[C]:k[D][f][B](e,r);if(!o&&!s){for(var l=e;l&&!k[D][f][B](l,r);)l=k.getPrototypeOf(l);if(l&&l!==k[D])return i.set(l,r,t)}return a=i.set(e,r,t,a),h&&(s?t!==n&&x(e,r):(x(e,r),o&&x(e,C))),a},deleteProperty:(e,r)=>{var t=k[D][f][B](e,r),a=i.deleteProperty(e,r);return a&&t&&(x(e,r),O[H](e)&&x(e,C)),a}});return k[n](e,"_p",{value:r,enumerable:!1}),r},A=de({}),pe=(e,r)=>{if(-1===r[u]("."))return{value:e[r],context:e};for(var t=r[g]("."),a=e,n=e,o=t[C],s=0;s<o;s++){if(null==a)return{value:void 0,context:null};a=(n=a)[t[s]]}return{value:a,context:n}},ce=e=>{e.__queued||(e.__queued=!0,c[b](e),_||(_=!0,r.then(()=>{for(var e=c[C],r=0;r<e;r++){var t=c[r];t.__queued=!1,t()}c[C]=0,_=!1})))},_e={text:(e,r)=>{r=null==r?"":r,e[t]!==r&&(e[t]=r)},html:(e,r)=>{r=null==r?"":r,e[s]!==r&&(e[s]=r)},value:(e,r)=>{var t;e[I]===te?(t=!!r,e[l]!==t&&(e[l]=t)):"radio"===e[I]?(t=e[S]==r,e[l]!==t&&(e[l]=t)):(r=null==r?"":r,e[S]!=r&&(e[S]=r))},attr:(e,r,t)=>{null==r||!1===r?e[z](t)&&e[W](t):(r=!0===r?"":String(r),e[R](t)!==r&&e.setAttribute(t,r))},class:(e,r)=>{if(r&&typeof r==ne)for(var t in r)r[t]?e[o].contains(t)||e[o].add(t):e[o].contains(t)&&e[o][Y](t)}},ye=(y,e)=>{if(!y._m){y._m=!0;var r=y[R]("s-data");if(r=p[r]){r=r(),e&&k.setPrototypeOf(r,e);var h=de(r);h.$refs={},h.$root=y,h.$store=A,e&&(h.$parent=e);var t=[],a=k[F](null),n=e=>{var r,t,a,n,o,s=e.target;for(!s._t||e[I]!==ee&&e[I]!==re||(r=s._s||h,t=s[I]===te?s[l]:s[S],(a=pe(r,s._t))[ie]&&(-1===s._t[u](".")?r[s._t]=t:a[ie][s._t[g](".")[v]()]=t));s&&s!==y[K];)s._h&&(n=s._h[e[I]])&&(o=s._s||h,typeof(o=pe(o,n))[S]==ae&&o[S][B](o[ie],e)),s=s[K]},m=e=>{a[e]||(a[e]=!0,y.addEventListener(e,n))},$=(x,A,e)=>{if(1===x.nodeType&&!x[z]("s-ignore"))if(x!==y&&x[z]("s-data"))(c=ye(x,A))&&e[b](c.unmount);else{var r=x[R]("s-if"),t=r||"TEMPLATE"!==x[G]?null:x[R]("s-for");if(r){var P=q[Z]("");x[U](P);var a=null,n=[];return e[b](()=>{n[j](e=>e())}),e[b](ve(()=>{pe(A,r)[S]?a||((a=x[X](!0))[W]("s-if"),$(a,A,n),P[K][V](a,P)):a&&(n[j](e=>e()),n[C]=0,a[Y](),a=null)},ce))}if(t){var o=t.match(ue);if(!o)return;var E=(t=o[1].replace(/[()]/g,"")[g](","))[0][oe](),N=t[1]?t[1][oe]():null,w=o[2][oe](),L=x[R]("s-key"),P=q[Z]("");x[U](P);var T=k[F](null);return e[b](()=>{for(var e in T)T[e][se][j](e=>e())}),e[b](ve(()=>{var e=pe(A,w)[S];O[H](e)&&fe(e,C);for(var r,t=q.createDocumentFragment(),a=k[F](null),n=e||[],o=O[H](n),s=o?n:k.keys(n),l=P,i=(o?n:s)[C],u=0;u<i;u++){var f=o?u:s[u],v=o?n[u]:n[f],d=L&&v?v[L]:o?f+"_"+(typeof v==ne?"o":v):f,p=T[d];if(p)p.scope[E]=v,N&&(p.scope[N]=f);else{var c=x.content[X](!0),_=k[F](A);_[E]=v,N&&(_[N]=f);for(var y=de(_),h=O[D][M][B](c.childNodes),m=[],b=0;b<h[C];b++)$(h[b],y,m);p={nodes:h,scope:y,cleanups:m}}if(p[le][0]!==l[Q]){for(b=0;b<p[le][C];b++)t.appendChild(p[le][b]);l[K][V](t,l[Q])}l=p[le][p[le][C]-1],a[d]=p,T[d]&&delete T[d]}for(r in T){var g=T[r];for(g[se][j](e=>e()),b=0;b<g[le][C];b++)g[le][b][Y]()}T=a},ce))}if(x.hasAttributes()){for(var s=null,l=!1,i=x.attributes,u=i[C],f=0;f<u;f++){var v,d=i[f][J],p=i[f][S];":"===d[0]?(s=s||[])[b]({type:"attr",name:d[M](1),path:p}):"s"===d[0]&&"-"===d[1]&&("ref"===(v=d[M](2))?h.$refs[p]=x:"model"===v?(l=!0,x._t=p,(s=s||[])[b]({type:S,path:p}),d=x[I]===te||"radio"===x[I]||"SELECT"===x[G]?re:ee,m(d)):_e[v]?(s=s||[])[b]({type:v,path:p}):(l=!0,x._h||(x._h=k[F](null)),x._h[v]=p,m(v)))}l&&(x._s=A),s&&e[b](ve(()=>{for(var e=0;e<s[C];e++){var r=s[e],t=pe(A,r.path),a=typeof(a=t[S])==ae?a[B](t[ie],x):a;"attr"===r[I]?"class"===r[J]?_e.class(x,a):_e.attr(x,a,r[J]):_e[r[I]](x,a)}},ce))}for(var c=x.firstChild;c;){var _=c[Q];$(c,A,e),c=_}}};return $(y,h,t),h.init&&h.init(),{unmount:()=>{h.destroy&&h.destroy[B](h);for(var e,r=0;r<t[C];r++)t[r]();for(e in a)y.removeEventListener(e,n);y._m=!1}}}}};return{data:(e,r)=>{p[e]=r},start:()=>{for(var e=q.querySelectorAll("[s-data]"),r=0;r<e[C];r++)ye(e[r])},store:(e,r)=>void 0===r?A[e]:A[e]=r,raw:e=>e&&e._r||e}})();window.spiki=e})();
