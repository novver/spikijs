(()=>{"use strict";var e=(()=>{var L=Object,T=Array,f=Reflect,e=Promise,a=Node,$=document,i=console,k="length",O="value",q="push",C="forEach",s="indexOf",M="split",j="slice",R="call",B="prototype",v="hasOwnProperty",p="getPrototypeOf",n="defineProperty",D="create",F="isArray",H="getAttribute",W="removeAttribute",z="hasAttribute",G="tagName",I="type",J="name",l="checked",K="parentNode",Q="nextSibling",t="textContent",o="innerHTML",U="replaceWith",V="insertBefore",X="cloneNode",Y="remove",Z="createTextNode",ee="checkbox",re="function",te="object",ae="unshift",ne="cleanups",oe="nodes",ie="context",u="scheduler",c="deps",d="className",h="destroy",se="init",m=L[D](null),_=[],y=!1,g=null,b=!0,r=e.resolve(),le=/^\s*(.*?)\s+in\s+(.+)\s*$/,fe=e=>{e._q||(e._q=!0,_[q](e),y||(y=!0,r.then(()=>{var e=_[j]();_[k]=0,y=!1;for(var r=0;r<e[k];r++)e[r]._q=!1,e[r]()})))},ve=(e,r)=>{if(-1===r[s]("."))return{value:e[r],context:e};for(var t=r[M]("."),a=e,n=e,o=0;o<t[k];o++){if(null==a)return i.warn("Property undefined: "+r),{value:void 0,context:null};a=(n=a)[t[o]]}return{value:a,context:n}},x={};[q,"pop","shift",ae,"splice","sort","reverse"][C](e=>{x[e]=function(){b=!1;try{return T[B][e].apply(this,arguments)}finally{b=!0,P(this,k)}}});var pe=(e,r)=>{var t;g&&((t=e._d)||(L[n](e,"_d",{value:L[D](null),writable:!0}),t=e._d),-1===(r=t[r]||(t[r]=[]))[s](g)&&(r[q](g),g[c][q](r)))},P=(e,r)=>{if(b&&e._d&&e._d[r])for(var t=e._d[r][j](),a=0;a<t[k];a++){var n=t[a];n[u]?n[u](n):n()}},A=e=>{if(e[c]){for(var r=0;r<e[c][k];r++){var t=e[c][r],a=t[s](e);-1!==a&&(t[a]=t[t[k]-1],t.pop())}e[c][k]=0}},ue=(r,e)=>{var t=()=>{A(t);var e=g;g=t;try{r()}finally{g=e}};return t[c]=[],t[u]=e,t(),()=>A(t)},ce=e=>{if(!e||typeof e!=te||e._y||e instanceof a)return e;if(e._p)return e._p;var r=new Proxy(e,{get:(e,r,t)=>"_r"===r?e:"_y"===r||("_d"===r?e._d:T[F](e)&&x[v](r)?x[r]:(pe(e,r),!(t=f.get(e,r,t))||typeof t!=te||t instanceof a?t:ce(t))),set:(e,r,t,a)=>{var n=e[r],o=T[F](e),i=o?Number(r)<e[k]:L[B][v][R](e,r);if(!o&&!i)for(var s=L[p](e);s&&s!==L[B];){if(L[B][v][R](s,r)){var l=f.set(s,r,t);return b&&t!==n&&P(e,r),l}s=L[p](s)}return l=f.set(e,r,t,a),b&&l&&(i&&t===n||(P(e,r),o&&P(e,k))),l},deleteProperty:(e,r)=>{var t=L[B][v][R](e,r),a=f.deleteProperty(e,r);return a&&t&&(P(e,r),T[F](e)&&P(e,k)),a}});return L[n](e,"_p",{value:r,enumerable:!1}),r},E=ce({}),de={text:(e,r)=>{r=null==r?"":r,e[t]!==r&&(e[t]=r)},html:(e,r)=>{r=null==r?"":r,e[o]!==r&&(e[o]=r)},value:(e,r)=>{if(e[I]===ee)e[l]=!!r;else if("radio"===e[I])e[l]=e[O]==r;else if(r=null==r?"":r,e[O]!=r){var t=e.selectionStart,a=e.selectionEnd;if(e[O]=r,$.activeElement===e)try{e.setSelectionRange(t,a)}catch(e){}}},attr:(e,r,t)=>{null==r||!1===r?e[W](t):e.setAttribute(t,!0===r?"":r)},class:(e,r)=>{if("string"==typeof r)e[d]!==r&&(e[d]=r);else if(r)for(var t in r)e.classList.toggle(t,!!r[t])},effect:()=>{}},he=(_,e)=>{if(!_._m){_._m=!0;var r=_[H]("s-data");if(r=m[r]){r=r(),e&&L.setPrototypeOf(r,e);var y=ce(r);y.$refs={},y.$root=_,y.$store=E,y.$parent=e;var t=[],a=L[D](null),n=e=>{for(var r=e.target;r&&r!==_[K];){var t=r._h&&r._h[e[I]];if(t)for(var a=0;a<t[k];a++){var n,o,i=t[a];i.isModel?(n=r[I]===ee?r[l]:r[O],(o=ve(r._s,i.path))[ie]&&(-1===i.path[s](".")?o[ie][i.path]=n:o[ie][i.path[M](".").pop()]=n)):typeof(o=ve(r._s,i.path))[O]==re&&o[O][R](o[ie],e)}r=r[K]}},w=e=>{a[e]||(a[e]=!0,_.addEventListener(e,n))},S=(m,g,e)=>{if(1===m.nodeType&&!m[z]("s-ignore"))if(m!==_&&m[z]("s-data"))(d=he(m,g))&&e[q](d.unmount);else{var r=m[H]("s-if"),t=!r&&"TEMPLATE"===m[G]&&m[H]("s-for");if(r){var b=$[Z]("");m[U](b);var a=null,n=[];return e[q](()=>n[C](e=>e())),e[q](ue(()=>{ve(g,r)[O]?a||((a=m[X](!0))[W]("s-if"),S(a,g,n),b[K][V](a,b)):a&&(n[C](e=>e()),n[k]=0,a[Y](),a=null)},fe))}if(t){var o=t.match(le);if(o){var x=(t=o[1][M](",").map(e=>e.trim().replace(/[()]/g,"")))[0],P=t[1],A=o[2].trim(),E=m[H]("s-key"),b=$[Z]("");m[U](b);var N=L[D](null);return e[q](()=>{for(var e in N)N[e][ne][C](e=>e())}),e[q](ue(()=>{var e=ve(g,A)[O]||[];T[F](e)&&pe(e,k);for(var r,t=$.createDocumentFragment(),a=L[D](null),n=T[F](e),o=n?e:L.keys(e),i=(n?e:o)[k],s=b,l=0;l<i;l++){var f=n?l:o[l],v=n?e[l]:e[f],p=E&&v?v[E]:n?String(f)+"_"+(typeof v==te?"o":String(v)):f,u=N[p];if(u)u.scope[x]=v,P&&(u.scope[P]=f);else{var c=m.content[X](!0),d=ce(L[D](g));d[x]=v,P&&(d[P]=f);for(var h=[],_=T[B][j][R](c.childNodes),y=0;y<_[k];y++)S(_[y],d,h);u={nodes:_,scope:d,cleanups:h}}if(u[oe][0]!==s[Q]){for(y=0;y<u[oe][k];y++)t.appendChild(u[oe][y]);s[K][V](t,s[Q])}s=u[oe][u[oe][k]-1],a[p]=u,N[p]&&delete N[p]}for(r in N)for(N[r][ne][C](e=>e()),y=0;y<N[r][oe][k];y++)N[r][oe][y][Y]();N=a},fe))}}else{if(m.hasAttributes()){for(var i=[],s=m.attributes,l=s[k],f=0;f<l;f++){var v,p,u=s[f][J],c=s[f][O];":"===u[0]?i[q]({type:"attr",name:u[j](1),path:c}):"s"!==u[0]||"-"!==u[1]||"data"!==(v=u[j](2))&&(v!==se?v in de?i[q]({type:v,path:c}):"model"===v?(i[q]({type:O,path:c}),m._t=c,m._s=g,m._h||(m._h={}),u=m[I]===ee||"radio"===m[I]||"SELECT"===m[G]?"change":"input",m._h[u]||(m._h[u]=[]),m._h[u][ae]({isModel:!0,path:c}),w(u)):"ref"===v?y.$refs[c]=m:(m._s=g,m._h||(m._h={}),m._h[v]||(m._h[v]=[]),m._h[v][q]({path:c}),w(v)):typeof(p=ve(g,c))[O]==re&&fe(()=>p[O][R](p[ie],m)))}i[k]&&e[q](ue(()=>{for(var e=0;e<i[k];e++){var r=i[e],t=(t=ve(g,r.path))[O]&&typeof t[O]==re?t[O][R](t[ie],m):t[O];"attr"===r[I]?"class"===r[J]?de.class(m,t):de.attr(m,t,r[J]):de[r[I]](m,t)}},fe))}for(var d=m.firstChild;d;){var h=d[Q];S(d,g,e),d=h}}}};return S(_,y,t),y[se]&&y[se](),{unmount:()=>{for(var e in y[h]&&y[h][R](y),t[C](e=>e()),a)_.removeEventListener(e,n);_._m=!1}}}}};return{data:(e,r)=>{m[e]=r},start:()=>{for(var e=$.querySelectorAll("[s-data]"),r=0;r<e[k];r++)he(e[r])},store:(e,r)=>void 0===r?E[e]:E[e]=r,raw:e=>e&&e._r||e}})();window.spiki=e})();
