(()=>{"use strict";var e=(()=>{var $=Object,k=Array,f=Reflect,e=Promise,a=Node,O=document,l=console,q="length",C="value",g="push",j="forEach",s="indexOf",b="split",M="slice",R="call",B="prototype",u="hasOwnProperty",v="getPrototypeOf",n="defineProperty",D="create",F="isArray",H="getAttribute",W="removeAttribute",z="hasAttribute",o="classList",G="tagName",I="type",J="name",c="checked",K="parentNode",Q="nextSibling",t="textContent",i="innerHTML",U="replaceWith",V="insertBefore",X="cloneNode",Y="remove",Z="createTextNode",ee="input",re="checkbox",te="function",ae="object",p="pop",ne="trim",oe="cleanups",ie="nodes",le="context",d="scheduler",y="deps",_="className",h="contains",x="destroy",m="Property undefined: ",P=$[D](null),A=[],E=!1,w=null,N=!0,r=e.resolve(),se=/^\s*(.*?)\s+in\s+(.+)\s*$/,L={};[g,p,"shift","unshift","splice","sort","reverse"][j](e=>{L[e]=function(){N=!1;try{return k[B][e].apply(this,arguments)}finally{N=!0,S(this,q)}}});var fe=(e,r)=>{var t;w&&((t=e._d)||($[n](e,"_d",{value:$[D](null),writable:!0,configurable:!0}),t=e._d),(e=t[r])||(t[r]=e=[]),-1===e[s](w)&&(e[g](w),w[y][g](e)))},S=(e,r)=>{if(N&&e._d&&(r=e._d[r]))for(var t=r[M](),a=t[q],n=0;n<a;n++){var o=t[n];o[d]?o[d](o):o()}},ue=(i,e)=>{var l=()=>{if(l[y]){for(var e=l[y][q],r=0;r<e;r++){var t,a=l[y][r],n=a[s](l);-1!==n&&(n!==(t=a[q]-1)&&(a[n]=a[t]),a[p]())}l[y][q]=0}else l[y]=[];var o=w;w=l;try{i()}finally{w=o}};return l[d]=e,l(),()=>{if(l[y])for(var e=l[y][q],r=0;r<e;r++){var t,a=l[y][r],n=a[s](l);-1!==n&&(n!==(t=a[q]-1)&&(a[n]=a[t]),a[p]())}}},ve=e=>{if(!e||typeof e!=ae||e._y||e instanceof a)return e;if(e._p)return e._p;var r=new Proxy(e,{get:(e,r,t)=>"_r"===r?e:"_y"===r||("_d"===r?e._d:k[F](e)&&L[u](r)?L[r]:(fe(e,r),!(t=f.get(e,r,t))||typeof t!=ae||t instanceof a?t:ve(t))),set:(e,r,t,a)=>{var n=e[r],o=k[F](e),i=o?Number(r)<e[q]:$[B][u][R](e,r);if(!o&&!i)for(var l=$[v](e);l&&l!==$[B];){if($[B][u][R](l,r)){var s=f.set(l,r,t);return N&&t!==n&&S(e,r),s}l=$[v](l)}return s=f.set(e,r,t,a),N&&(i?t!==n&&S(e,r):(S(e,r),o&&S(e,q))),s},deleteProperty:(e,r)=>{var t=$[B][u][R](e,r),a=f.deleteProperty(e,r);return a&&t&&(S(e,r),k[F](e)&&S(e,q)),a}});return $[n](e,"_p",{value:r,enumerable:!1}),r},ce=ve({}),pe=(e,r)=>{if(-1===r[s]("."))return void 0===e[r]&&l.warn(m+r),{value:e[r],context:e};for(var t=r[b]("."),a=e,n=e,o=t[q],i=0;i<o;i++){if(null==a)return l.warn(m+r),{value:void 0,context:null};a=(n=a)[t[i]]}return{value:a,context:n}},de=e=>{e._q||(e._q=!0,A[g](e),E||(E=!0,r.then(()=>{for(var e=A[q],r=0;r<e;r++){var t=A[r];t._q=!1,t()}A[q]=0,E=!1})))},ye={text:(e,r)=>{r=null==r?"":r,e[t]!==r&&(e[t]=r)},html:(e,r)=>{r=null==r?"":r,e[i]!==r&&(e[i]=r)},value:(e,r)=>{if(e[I]===re){var t=!!r;e[c]!==t&&(e[c]=t)}else if("radio"===e[I])t=e[C]==r,e[c]!==t&&(e[c]=t);else if(r=null==r?"":r,e[C]!=r){var a=e.selectionStart,n=e.selectionEnd;if(e[C]=r,O.activeElement===e)try{e.setSelectionRange(a,n)}catch(e){}}},attr:(e,r,t)=>{null==r||!1===r?e[z](t)&&e[W](t):(r=!0===r?"":String(r),e[H](t)!==r&&e.setAttribute(t,r))},class:(e,r)=>{if("string"==typeof r)e[_]!==r&&(e[_]=r);else if(r&&typeof r==ae)for(var t in r)r[t]?e[o][h](t)||e[o].add(t):e[o][h](t)&&e[o][Y](t)}},_e=(_,e)=>{if(!_._m){_._m=!0;var r=_[H]("s-data");if(r=P[r]){r=r(),e&&$.setPrototypeOf(r,e);var h=ve(r);h.$refs={},h.$root=_,h.$store=ce,e&&(h.$parent=e);var t=[],a=$[D](null),n=e=>{var r,t,a,n,o,i=e.target;for(!i._t||e[I]!==ee&&"change"!==e[I]||(r=i._s||h,t=i[I]===re?i[c]:i[C],(a=pe(r,i._t))[le]&&(-1===i._t[s](".")?r[i._t]=t:a[le][i._t[b](".")[p]()]=t));i&&i!==_[K];)i._h&&(n=i._h[e[I]])&&(o=i._s||h,typeof(o=pe(o,n))[C]==te&&o[C][R](o[le],e)),i=i[K]},m=e=>{a[e]||(a[e]=!0,_.addEventListener(e,n))},T=(x,P,e)=>{if(1===x.nodeType&&!x[z]("s-ignore"))if(x!==_&&x[z]("s-data"))(d=_e(x,P))&&e[g](d.unmount);else{var r=x[H]("s-if"),t=r||"TEMPLATE"!==x[G]?null:x[H]("s-for");if(r){var A=O[Z]("");x[U](A);var a=null,n=[];return e[g](()=>{n[j](e=>e())}),e[g](ue(()=>{pe(P,r)[C]?a||((a=x[X](!0))[W]("s-if"),T(a,P,n),A[K][V](a,A)):a&&(n[j](e=>e()),n[q]=0,a[Y](),a=null)},de))}if(t){var o=t.match(se);if(!o)return;var E=(t=o[1].replace(/[()]/g,"")[b](","))[0][ne](),w=t[1]?t[1][ne]():null,N=o[2][ne](),L=x[H]("s-key"),A=O[Z]("");x[U](A);var S=$[D](null);return e[g](()=>{for(var e in S)S[e][oe][j](e=>e())}),e[g](ue(()=>{var e=pe(P,N)[C];k[F](e)&&fe(e,q);for(var r,t=O.createDocumentFragment(),a=$[D](null),n=e||[],o=k[F](n),i=o?n:$.keys(n),l=A,s=(o?n:i)[q],f=0;f<s;f++){var u=o?f:i[f],v=o?n[f]:n[u],c=L&&v?v[L]:o?u+"_"+(typeof v==ae?"o":v):u,p=S[c];if(p)p.scope[E]=v,w&&(p.scope[w]=u);else{var d=x.content[X](!0),y=$[D](P);y[E]=v,w&&(y[w]=u);for(var _=ve(y),h=k[B][M][R](d.childNodes),m=[],g=0;g<h[q];g++)T(h[g],_,m);p={nodes:h,scope:_,cleanups:m}}if(p[ie][0]!==l[Q]){for(g=0;g<p[ie][q];g++)t.appendChild(p[ie][g]);l[K][V](t,l[Q])}l=p[ie][p[ie][q]-1],a[c]=p,S[c]&&delete S[c]}for(r in S){var b=S[r];for(b[oe][j](e=>e()),g=0;g<b[ie][q];g++)b[ie][g][Y]()}S=a},de))}if(x.hasAttributes()){for(var i=null,l=!1,s=x.attributes,f=s[q],u=0;u<f;u++){var v,c=s[u][J],p=s[u][C];":"===c[0]?(i=i||[])[g]({type:"attr",name:c[M](1),path:p}):"s"===c[0]&&"-"===c[1]&&("ref"===(v=c[M](2))?h.$refs[p]=x:"model"===v?(l=!0,x._t=p,(i=i||[])[g]({type:C,path:p}),c=x[I]===re||"radio"===x[I]||"SELECT"===x[G]?"change":ee,m(c)):ye[v]?(i=i||[])[g]({type:v,path:p}):(l=!0,x._h||(x._h=$[D](null)),x._h[v]=p,m(v)))}l&&(x._s=P),i&&e[g](ue(()=>{for(var e=0;e<i[q];e++){var r=i[e],t=pe(P,r.path),a=typeof(a=t[C])==te?a[R](t[le],x):a;"attr"===r[I]?"class"===r[J]?ye.class(x,a):ye.attr(x,a,r[J]):ye[r[I]](x,a)}},de))}for(var d=x.firstChild;d;){var y=d[Q];T(d,P,e),d=y}}};return T(_,h,t),h.init&&h.init(),{unmount:()=>{h[x]&&h[x][R](h);for(var e,r=0;r<t[q];r++)t[r]();for(e in a)_.removeEventListener(e,n);_._m=!1}}}}};return{data:(e,r)=>{P[e]=r},start:()=>{for(var e=O.querySelectorAll("[s-data]"),r=0;r<e[q];r++)_e(e[r])},store:(e,r)=>void 0===r?ce[e]:ce[e]=r,raw:e=>e&&e._r||e}})();window.spiki=e})();
