var spiki=(()=>{var O=Object,q=Array,l=Reflect,e=Promise,a=Node,w=document,C="length",S="value",b="push",j="forEach",u="indexOf",g="split",M="slice",B="call",D="prototype",f="hasOwnProperty",n="defineProperty",F="create",H="isArray",R="getAttribute",W="removeAttribute",z="hasAttribute",o="classList",G="tagName",I="type",J="name",i="checked",K="parentNode",Q="nextSibling",t="textContent",s="innerHTML",U="replaceWith",V="insertBefore",X="cloneNode",Y="remove",Z="createTextNode",ee="input",re="change",te="checkbox",ae="function",ne="object",v="pop",oe="trim",se="cleanups",ie="nodes",le="context",p="scheduler",d=O[F](null),c=[],_=!1,y=null,h=!0,r=e.resolve(),ue=/^\s*(.*?)\s+in\s+(.+)\s*$/,m={};[b,v,"shift","unshift","splice","sort","reverse"][j](e=>{m[e]=function(){h=!1;try{return q[D][e].apply(this,arguments)}finally{h=!0,x(this,C)}}});var fe=(e,r)=>{var t;y&&((t=e._d)||(O[n](e,"_d",{value:O[F](null),writable:!0,configurable:!0}),t=e._d),(e=t[r])||(t[r]=e=[]),-1===e[u](y)&&(e[b](y),y.deps[b](e)))},x=(e,r)=>{if(h&&e._d){r=e._d[r];if(r)for(var t=r[M](),a=t[C],n=0;n<a;n++){var o=t[n];o[p]?o[p](o):o()}}},ve=(s,e)=>{var i=()=>{if(i.deps){for(var e=i.deps[C],r=0;r<e;r++){var t,a=i.deps[r],n=a[u](i);-1!==n&&(n!==(t=a[C]-1)&&(a[n]=a[t]),a[v]())}i.deps[C]=0}else i.deps=[];var o=y;y=i;try{s()}finally{y=o}};return i[p]=e,i(),()=>{if(i.deps)for(var e=i.deps[C],r=0;r<e;r++){var t,a=i.deps[r],n=a[u](i);-1!==n&&(n!==(t=a[C]-1)&&(a[n]=a[t]),a[v]())}}},pe=e=>{if(!e||typeof e!=ne||e._y||e instanceof a)return e;if(e._p)return e._p;var r=new Proxy(e,{get:(e,r,t)=>{if("_r"===r)return e;if("_y"===r)return!0;if("_d"===r)return e._d;if(q[H](e)&&m[f](r))return m[r];fe(e,r);t=l.get(e,r,t);return!t||typeof t!=ne||t instanceof a?t:pe(t)},set:(e,r,t,a)=>{var n=e[r],o=q[H](e),s=o?Number(r)<e[C]:O[D][f][B](e,r);if(!o&&!s){for(var i=e;i&&!O[D][f][B](i,r);)i=O.getPrototypeOf(i);if(i&&i!==O[D])return l.set(i,r,t)}a=l.set(e,r,t,a);return h&&(s?t!==n&&x(e,r):(x(e,r),o&&x(e,C))),a},deleteProperty:(e,r)=>{var t=O[D][f][B](e,r),a=l.deleteProperty(e,r);return a&&t&&(x(e,r),q[H](e)&&x(e,C)),a}});return O[n](e,"_p",{value:r,enumerable:!1}),r},A=pe({}),de=(e,r)=>{if(-1===r[u]("."))return{value:e[r],context:e};for(var t=r[g]("."),a=e,n=e,o=t[C],s=0;s<o;s++){if(null==a)return{value:void 0,context:null};a=(n=a)[t[s]]}return{value:a,context:n}},ce=e=>{e.__queued||(e.__queued=!0,c[b](e),_||(_=!0,r.then(()=>{for(var e=c[C],r=0;r<e;r++){var t=c[r];t.__queued=!1,t()}c[C]=0,_=!1})))},_e={text:(e,r)=>{r=null==r?"":r,e[t]!==r&&(e[t]=r)},html:(e,r)=>{r=null==r?"":r,e[s]!==r&&(e[s]=r)},value:(e,r)=>{var t;e[I]===te?(t=!!r,e[i]!==t&&(e[i]=t)):"radio"===e[I]?(t=e[S]==r,e[i]!==t&&(e[i]=t)):(r=null==r?"":r,e[S]!=r&&(e[S]=r))},attr:(e,r,t)=>{null==r||!1===r?e[z](t)&&e[W](t):(r=!0===r?"":String(r),e[R](t)!==r&&e.setAttribute(t,r))},class:(e,r)=>{if(r&&typeof r==ne)for(var t in r)r[t]?e[o].contains(t)||e[o].add(t):e[o].contains(t)&&e[o][Y](t)}},ye=(y,e)=>{if(!y._m){y._m=!0;var r=y[R]("s-data"),r=d[r];if(r){r=r();e&&O.setPrototypeOf(r,e);var h=pe(r);h.$refs={},h.$root=y,h.$store=A,e&&(h.$parent=e);var t=[],a=O[F](null),n=e=>{var r,t,a,n,o,s=e.target;for(!s._t||e[I]!==ee&&e[I]!==re||(r=s._s||h,t=s[I]===te?s[i]:s[S],(a=de(r,s._t))[le]&&(-1===s._t[u](".")?r[s._t]=t:a[le][s._t[g](".")[v]()]=t));s&&s!==y[K];)s._h&&(n=s._h[e[I]])&&(o=s._s||h,typeof(o=de(o,n))[S]==ae&&o[S][B](o[le],e)),s=s[K]},m=e=>{a[e]||(a[e]=!0,y.addEventListener(e,n))},k=(x,A,e)=>{if(1===x.nodeType&&!x[z]("s-ignore"))if(x!==y&&x[z]("s-data"))(c=ye(x,A))&&e[b](c.unmount);else{var r=x[R]("s-if"),t=r||"TEMPLATE"!==x[G]?null:x[R]("s-for");if(r){var P=w[Z]("");x[U](P);var a=null,n=[];return e[b](()=>{n[j](e=>e())}),e[b](ve(()=>{de(A,r)[S]?a||((a=x[X](!0))[W]("s-if"),k(a,A,n),P[K][V](a,P)):a&&(n[j](e=>e()),n[C]=0,a[Y](),a=null)},ce))}if(t){var o=t.match(ue);if(!o)return;var t=o[1].replace(/[()]/g,"")[g](","),E=t[0][oe](),N=t[1]?t[1][oe]():null,L=o[2][oe](),T=x[R]("s-key"),P=w[Z]("");x[U](P);var $=O[F](null);return e[b](()=>{for(var e in $)$[e][se][j](e=>e())}),e[b](ve(()=>{var e=de(A,L)[S];q[H](e)&&fe(e,C);for(var r,t=w.createDocumentFragment(),a=O[F](null),n=e||[],o=q[H](n),s=o?n:O.keys(n),i=P,l=(o?n:s)[C],u=0;u<l;u++){var f=o?u:s[u],v=o?n[u]:n[f],p=T&&v?v[T]:o?f+"_"+(typeof v==ne?"o":v):f,d=$[p];if(d)d.scope[E]=v,N&&(d.scope[N]=f);else{var c=x.content[X](!0),_=O[F](A);_[E]=v,N&&(_[N]=f);for(var y=pe(_),h=q[D][M][B](c.childNodes),m=[],b=0;b<h[C];b++)k(h[b],y,m);d={nodes:h,scope:y,cleanups:m}}if(d[ie][0]!==i[Q]){for(b=0;b<d[ie][C];b++)t.appendChild(d[ie][b]);i[K][V](t,i[Q])}i=d[ie][d[ie][C]-1],a[p]=d,$[p]&&delete $[p]}for(r in $){var g=$[r];g[se][j](e=>e());for(b=0;b<g[ie][C];b++)g[ie][b][Y]()}$=a},ce))}if(x.hasAttributes()){for(var s=null,i=!1,l=x.attributes,u=l[C],f=0;f<u;f++){var v,p=l[f][J],d=l[f][S];":"===p[0]?(s=s||[])[b]({type:"attr",name:p[M](1),path:d}):"s"===p[0]&&"-"===p[1]&&("ref"===(v=p[M](2))?h.$refs[d]=x:"model"===v?(i=!0,x._t=d,(s=s||[])[b]({type:S,path:d}),p=x[I]===te||"radio"===x[I]||"SELECT"===x[G]?re:ee,m(p)):_e[v]?(s=s||[])[b]({type:v,path:d}):(i=!0,x._h||(x._h=O[F](null)),x._h[v]=d,m(v)))}i&&(x._s=A),s&&e[b](ve(()=>{for(var e=0;e<s[C];e++){var r=s[e],t=de(A,r.path),a=t[S],a=typeof a==ae?a[B](t[le],x):a;"attr"===r[I]?"class"===r[J]?_e.class(x,a):_e.attr(x,a,r[J]):_e[r[I]](x,a)}},ce))}for(var c=x.firstChild;c;){var _=c[Q];k(c,A,e),c=_}}};return k(y,h,t),h.init&&h.init(),{unmount:()=>{h.destroy&&h.destroy[B](h);for(var e,r=0;r<t[C];r++)t[r]();for(e in a)y.removeEventListener(e,n);y._m=!1}}}}};return{data:(e,r)=>{d[e]=r},start:()=>{for(var e=w.querySelectorAll("[s-data]"),r=0;r<e[C];r++)ye(e[r])},store:(e,r)=>void 0===r?A[e]:A[e]=r,raw:e=>e&&e._r||e}})();export default spiki;
