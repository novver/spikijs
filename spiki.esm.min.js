var spiki=(()=>{var n,r,E=Object,A=Array,P=Reflect,e=Promise,T=Map,k=Set,t=WeakMap,a=Node,L=document,N="length",C="value",S="push",$="forEach",l="indexOf",j="split",M="slice",O="call",R="get",W="set",q="add",z="delete",B="has",s="clear",D="prototype",F="hasOwnProperty",H="create",I="isArray",U="getAttribute",X="removeAttribute",G="hasAttribute",J="tagName",K="type",Q="name",u="checked",V="parentNode",Y="nextSibling",Z="replaceWith",ee="insertBefore",re="cloneNode",te="remove",ne="createTextNode",ae="addEventListener",i="dependencies",ie="cleanups",oe="nodes",se="context",o="scheduler",f=E[H](null),le=new t,v=new t,c=new t,p=new T,d=new k,ue=/^\s*(.*?)\s+in\s+(.+)\s*$/,y=!0,m=e.resolve(),_={};[S,"pop","shift","unshift","splice","sort","reverse"][$](t=>{_[t]=function(){for(var e=[],r=0;r<arguments[N];r++)e[r]=arguments[r];y=!1;try{return A[D][t].apply(this,e)}finally{y=!0,h(this,N)}}});var fe=(e,r)=>{if("string"!=typeof r)return{value:r,context:e};if(-1===r[l]("."))return{value:e?e[r]:void 0,context:e};var t=p[R](r);t||(1e3<p.size&&p[s](),t=r[j]("."),p[W](r,t));for(var n=e,a=e,i=0;i<t[N];i++){var o=t[i];if(null==n)return{value:n,context:null};n=(a=n)[o]}return{value:n,context:a}},ve=e=>!d[B](e)&&d[q](e)&&!r&&(r=!0)&&m.then(()=>{d[$](e=>e()),d[s](),r=!1}),ce=(e,r)=>{var t;n&&((t=v[R](e))||(t=new T,v[W](e,t)),(e=t[R](r))||(e=new k,t[W](r,e)),e[q](n),n[i][q](e))},h=(e,r)=>{var t,n;y&&(t=v[R](e))&&(n=t[R](r))&&n[$](e=>{e[o]?e[o](e):e()})},pe=(r,e)=>{var t=()=>{t[i][$](e=>e[z](t)),t[i][s]();var e=n;n=t;try{r()}finally{n=e}};return t[i]=new k,t[o]=e,t(),()=>{t[i][$](e=>e[z](t)),t[i][s](),d[z](t)}},g=e=>{if(!e||"object"!=typeof e||e._ip||e instanceof a)return e;var r=c[R](e);if(r)return r;r=new Proxy(e,{get:(e,r,t)=>{if("_r"===r)return e;if("_ip"===r)return!0;if(A[I](e)&&_[F](r))return _[r];ce(e,r);t=P[R](e,r,t);return!t||"object"!=typeof t||t instanceof a?t:g(t)},set:(e,r,t,n)=>{var a=e[r],i=A[I](e)?Number(r)<e[N]:E[D][F][O](e,r),n=P[W](e,r,t,n);return y&&(i?a!==t&&h(e,r):(h(e,r),A[I](e)&&h(e,N))),n},deleteProperty:(e,r)=>{var t=E[D][F][O](e,r),n=P.deleteProperty(e,r);return n&&t&&(h(e,r),A[I](e)&&h(e,N)),n}});return c[W](e,r),r},de=g({}),ye={text:(e,r)=>{e.textContent=null!=r?r:""},html:(e,r)=>{e.innerHTML=null!=r?r:""},value:(e,r)=>{"checkbox"===e[K]?e[u]=!!r:"radio"===e[K]&&e[Q]?e[u]=e[C]==r:e[C]!=r&&(e[C]=null!=r?r:"")},attr:(e,r,t)=>{null==r||!1===r?e[X](t):e.setAttribute(t,!0===r?"":r)},class:(t,e)=>{"string"==typeof e&&e[j](/\s+/)[$](e=>{var r;e&&(e=(r="!"===e[0])?e[M](1):e,t.classList[r?te:q](e))})},init:()=>{},destroy:()=>{}},me=p=>{if(!p._im){p._im=1;var e=p[U]("s-data"),e=f[e];if(e){var b=g(e());b.$refs={},b.$root=p,b.$store=de;var r=[],w=e=>{var r,t,n,a,i=e.target;for(!i._m||"input"!==e[K]&&"change"!==e[K]||(n=i._m,r="checkbox"===i[K]?i[u]:i[C],t=fe(i._s||b,n)[se],-1===n[l](".")?(i._s||b)[n]=r:t&&(t[(n=n[j]("."))[n[N]-1]]=r));i&&i!==p[V];){var o,s=le[R](i);s&&(a=s[e[K]])&&(s=(o=fe(i._s||b,a))[C],o=o[se],"function"==typeof s&&s[O](o,e)),i=i[V]}},x=(d,y,i)=>{if(1===d.nodeType&&!d[G]("s-ignore"))if(d!==p&&d[G]("s-data")){var e=me(d);e&&i[S](e.unmount)}else{var t;if(t=d[U]("s-if")){var n,a=L[ne](""),o=[];return d[Z](a),i[S](()=>{o[$](e=>e())}),i[S](pe(()=>{var e=fe(y,t),r=e[C],e=e[se];("function"==typeof r?r[O](e,d):r)?n||((n=d[re](!0))[X]("s-if"),x(n,y,o),a[V][ee](n,a)):n&&(o[$](e=>e()),o[N]=0,n[te](),n=null)},ve))}if("TEMPLATE"===d[J]&&(t=d[U]("s-for"))){var r=t.match(ue);if(!r)return;var e=r[1].replace(/[()]/g,""),s=r[2],e=e[j](","),m=e[0].trim(),_=e[1]?e[1].trim():null,h=d[U]("s-key"),l=L[ne]("");d[Z](l);var g=new T;return i[S](()=>{g[$](e=>{e[ie][$](e=>e())})}),i[S](pe(()=>{var v=fe(y,s)[C];A[I](v)&&ce(v,N);var c=l,e=A[I](v)?v:v?E.keys(v):[],p=new T;e[$]((e,r)=>{var t,n=A[I](v)?r:e,a=A[I](v)?e:v[e],i=h&&a?a[h]:"object"==typeof a&&a?a:n+"_"+a,r=g[R](i),e=e=>{E.defineProperty(e,m,{configurable:!0,enumerable:!0,get:()=>v[n],set:e=>{v[n]=e}})};if(r)e(r.scope),_&&(r.scope[_]=n);else{var a=d.content[re](!0),o=(e=>{e=E[H](e);return new Proxy(e,{set:(e,r,t,n)=>{if(e[F](r))return P[W](e,r,t,n);for(var a=e;a&&!E[D][F][O](a,r);)a=E.getPrototypeOf(a);return P[W](a||e,r,t)}})})(y),s=[];e(o),_&&(o[_]=n);for(var l=[],u=a.firstChild;u;){l[S](u);var f=u[Y];x(u,o,s),u=f}r={nodes:l,scope:o,cleanups:s}}r[oe][0]!==c[Y]&&(t=L.createDocumentFragment(),r[oe][$](e=>t.appendChild(e)),c[V][ee](t,c[Y])),c=r[oe][r[oe][N]-1],p[W](i,r),g[z](i)}),g[$](e=>{e[ie][$](e=>e()),e[oe][$](e=>e[te]())}),g=p},ve))}for(var u=d.attributes,f=u[N]-1;0<=f;f--)(e=>{var t,r,n=e[Q],a=e[C];":"===n[0]?i[S](pe(()=>{var e=fe(y,a),r=e[C],t=e[se],e="class"===n[M](1)?"class":"attr";ye[e](d,"function"==typeof r?r[O](t,d):r,n[M](1))},ve)):"s"===n[0]&&"-"===n[1]&&("ref"===(t=n[M](2))?b.$refs[a]=d:"model"===t?(i[S](pe(()=>{var e=fe(y,a);ye[C](d,e[C])},ve)),/^(INPUT|SELECT|TEXTAREA)$/.test(d[J])&&(d._s=y,d._m=a,r="checkbox"===d[K]||"radio"===d[K]||"SELECT"===d[J]?"change":"input",p._le||(p._le=new k),p._le[B](r)||(p._le[q](r),p[ae](r,w)))):ye[t]?i[S](pe(()=>{var e=fe(y,a),r=e[C],e=e[se];ye[t](d,"function"==typeof r?r[O](e,d):r)},ve)):(d._s=y,(r=le[R](d))||(r={},le[W](d,r)),r[t]=a,p._le||(p._le=new k),p._le[B](t)||(p._le[q](t),p[ae](t,w))))})(u[f]);for(var v=d.firstElementChild;v;){var c=v.nextElementSibling;x(v,y,i),v=c}}};return x(p,b,r),b.init&&b.init(),{unmount:()=>{b.destroy&&b.destroy[O](b),r[$](e=>e()),p._le&&p._le[$](e=>{p.removeEventListener(e,w)}),p._im=0}}}}};return{data:(e,r)=>{f[e]=r},start:()=>{for(var e=L.querySelectorAll("[s-data]"),r=0;r<e[N];r++)me(e[r])},store:(e,r)=>void 0===r?de[e]:de[e]=r,raw:e=>e&&e._r||e}})();export default spiki;
