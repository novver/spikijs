var spiki=(()=>{var n,r,w=Object,x=Array,k=Reflect,e=Promise,E=Map,P=Set,t=WeakMap,T="length",N="slice",L="split",C="push",S="forEach",$="delete",o="clear",O="add",j="has",M="get",R="set",W="value",q="input",z="change",B="parentNode",D="nextSibling",F="prototype",H="hasOwnProperty",I="getAttribute",U="removeAttribute",X="addEventListener",G="insertBefore",J="replaceWith",K="remove",Q="createTextNode",V="cloneNode",Y="tagName",Z="s-data",ee="s-if",a=w.create(null),re=new t,i=new t,l=new t,s=new E,c=new P,te=/^\s*(.*?)\s+in\s+(.+)\s*$/,v=!0,f=e.resolve(),u={};[C,"pop","shift","unshift","splice","sort","reverse"][S](function(t){u[t]=function(){for(var e=[],r=arguments[T];r--;)e[r]=arguments[r];v=!1;try{return x[F][t].apply(this,e)}finally{v=!0,y(this,T)}}});var ne=(e,r)=>{if("string"!=typeof r)return{v:r,c:e};if(-1===r.indexOf("."))return{v:e?e[r]:void 0,c:e};var t=s[M](r);t||(1e3<s.size&&s[o](),t=r[L]("."),s[R](r,t));for(var n=e,a=e,i=0;i<t[T];i++){if(null==n)return{v:n,c:null};n=(a=n)[t[i]]}return{v:n,c:a}},ae=e=>!c[j](e)&&c[O](e)&&!r&&(r=!0)&&f.then(()=>{c[S](e=>e()),c[o](),r=!1}),ie=(e,r)=>{var t;n&&((t=i[M](e))||i[R](e,t=new E),(e=t[M](r))||t[R](r,e=new P),e[O](n),n.d[O](e))},y=(e,r)=>{var t,n;v&&(t=i[M](e))&&(n=t[M](r))&&n[S](e=>e.x?e.x(e):e())},oe=(r,e)=>{var t=()=>{t.d[S](e=>e[$](t)),t.d[o]();var e=n;n=t;try{r()}finally{n=e}};return t.d=new P,t.x=e,t(),()=>{t.d[S](e=>e[$](t)),t.d[o](),c[$](t)}},d=e=>{if(!e||"object"!=typeof e||e._p||e instanceof Node)return e;var r=l[M](e);return r||(r=new Proxy(e,{get:(e,r,t)=>{if("_p"===r)return!0;if(x.isArray(e)&&w[F][H].call(u,r))return u[r];ie(e,r);t=k[M](e,r,t);return!t||"object"!=typeof t||t instanceof Node?t:d(t)},set:(e,r,t,n)=>{var a=e[r],i=x.isArray(e)?Number(r)<e[T]:w[F][H].call(e,r),n=k[R](e,r,t,n);return v&&(i?a!==t&&y(e,r):(y(e,r),x.isArray(e)&&y(e,T))),n},deleteProperty:(e,r)=>{var t=w[F][H].call(e,r),n=k.deleteProperty(e,r);return n&&t&&(y(e,r),x.isArray(e)&&y(e,T)),n}}),l[R](e,r),r)},p=d({}),le={text:(e,r)=>{e.textContent=null!=r?r:""},html:(e,r)=>{e.innerHTML=null!=r?r:""},value:(e,r)=>{"checkbox"===e.type?e.checked=!!r:"radio"===e.type&&e.name?e.checked=e[W]==r:e[W]!=r&&(e[W]=null!=r?r:"")},attr:(e,r,t)=>{null==r||!1===r?e[U](t):e.setAttribute(t,!0===r?"":r)},class:(r,e)=>{"string"==typeof e&&e[L](/\s+/)[S](e=>{e&&r.classList["!"===e[0]?K:O]("!"===e[0]?e[N](1):e)})},init:()=>{},destroy:()=>{}},se=u=>{if(!u._m){u._m=1;var e=a[u[I](Z)];if(e){var y=d(e());y.$refs={},y.$root=u,y.$store=p;var r=[],b=e=>{var r,t,n,a,i=e.target;for(!i._m||e.type!==q&&e.type!==z||(n=i._m,r="checkbox"===i.type?i.checked:i[W],t=ne(i._s||y,n),-1===n.indexOf(".")?(i._s||y)[n]=r:t.c&&(n=n[L]("."),t.c[n[n[T]-1]]=r));i&&i!==u[B];){var o=re[M](i);o&&(a=o[e.type])&&("function"==typeof(o=ne(i._s||y,a)).v&&o.v.call(o.c,e)),i=i[B]}},A=(d,p,i)=>{if(1===d.nodeType&&!d[I]("s-ignore"))if(d!==u&&d[I](Z)){var e=se(d);e&&i[C](e.unmount)}else{var r;if(r=d[I](ee)){var t,n=document[Q](""),a=[];return d[J](n),i[C](()=>{a[S](e=>e())}),i[C](oe(()=>{var e=ne(p,r);("function"==typeof e.v?e.v.call(e.c,d):e.v)?t||((t=d[V](!0))[U](ee),A(t,p,a),n[B][G](t,n)):t&&(a[S](e=>e()),a[T]=0,t[K](),t=null)},ae))}if("TEMPLATE"===d[Y]&&(r=d[I]("s-for"))){var o=r.match(te);if(!o)return;var e=o[1].replace(/[()]/g,"")[L](","),l=o[2],m=e[0].trim(),_=e[1]?e[1].trim():null,h=d[I]("s-key"),n=document[Q]("");d[J](n);var g=new E;return i[C](()=>{g[S](e=>e.k[S](e=>e()))}),i[C](oe(()=>{var f=ne(p,l).v;x.isArray(f)&&ie(f,T);var u=n,e=x.isArray(f)?f:f?w.keys(f):[],y=new E;e[S]((e,r)=>{var t,n=x.isArray(f)?r:e,a=x.isArray(f)?e:f[e],i=h&&a?a[h]:"object"==typeof a&&a?a:n+"_"+a,r=g[M](i),e=e=>{w.defineProperty(e,m,{configurable:!0,enumerable:!0,get:()=>f[n],set:e=>{f[n]=e}})};if(r)e(r.s),_&&(r.s[_]=n);else{var a=d.content[V](!0),o=(e=>{e=w.create(e);return new Proxy(e,{set:(e,r,t,n)=>{if(w[F][H].call(e,r))return k[R](e,r,t,n);for(var a=e;a&&!w[F][H].call(a,r);)a=w.getPrototypeOf(a);return k[R](a||e,r,t)}})})(p),l=[];e(o),_&&(o[_]=n);for(var s=[],c=a.firstChild;c;){s[C](c);var v=c[D];A(c,o,l),c=v}r={n:s,s:o,k:l}}r.n[0]!==u[D]&&(t=document.createDocumentFragment(),r.n[S](e=>t.appendChild(e)),u[B][G](t,u[D])),u=r.n[r.n[T]-1],y[R](i,r),g[$](i)}),g[S](e=>{e.k[S](e=>e()),e.n[S](e=>e[K]())}),g=y},ae))}for(var s=d.attributes,c=s[T]-1;0<=c;c--)(e=>{var r,t,n=e.name,a=e[W];":"===n[0]?i[C](oe(()=>{var e=ne(p,a);le["class"===n[N](1)?"class":"attr"](d,"function"==typeof e.v?e.v.call(e.c,d):e.v,n[N](1))},ae)):"s"===n[0]&&"-"===n[1]&&("ref"===(r=n[N](2))?y.$refs[a]=d:"model"===r?(i[C](oe(()=>{le.value(d,ne(p,a).v)},ae)),/^(INPUT|SELECT|TEXTAREA)$/.test(d[Y])&&(d._s=p,d._m=a,t="checkbox"===d.type||"radio"===d.type||"SELECT"===d[Y]?z:q,u._e||(u._e=new P),u._e[j](t)||(u._e[O](t),u[X](t,b)))):le[r]?i[C](oe(()=>{var e=ne(p,a);le[r](d,"function"==typeof e.v?e.v.call(e.c,d):e.v)},ae)):(d._s=p,(t=re[M](d))||re[R](d,t={}),t[r]=a,u._e||(u._e=new P),u._e[j](r)||(u._e[O](r),u[X](r,b))))})(s[c]);for(var v=d.firstElementChild;v;){var f=v.nextElementSibling;A(v,p,i),v=f}}};return A(u,y,r),y.init&&y.init(),{unmount:()=>{y.destroy&&y.destroy.call(y),r[S](e=>e()),u._e&&u._e[S](e=>u.removeEventListener(e,b)),u._m=0}}}}};return{data:(e,r)=>{a[e]=r},start:()=>{for(var e=document.querySelectorAll("["+Z+"]"),r=0;r<e[T];r++)se(e[r])},store:(e,r)=>void 0===r?p[e]:p[e]=r}})();export default spiki;
