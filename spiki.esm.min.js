var spiki=(()=>{var n,r,A=Object,P=Array,T=Reflect,e=Promise,L=Map,N=Set,t=WeakMap,a=Node,k=document,$="length",C="value",S="push",M="forEach",u="indexOf",O="split",j="slice",R="call",W="get",q="set",z="add",B="delete",D="has",i="clear",F="prototype",H="hasOwnProperty",I="create",U="isArray",X="getAttribute",G="removeAttribute",J="hasAttribute",K="tagName",Q="type",V="name",v="checked",Y="parentNode",Z="nextSibling",ee="firstChild",re="replaceWith",te="insertBefore",ne="cloneNode",ae="remove",oe="createTextNode",se="addEventListener",ie="checkbox",le="function",ue="object",o="dependencies",ve="cleanups",fe="nodes",ce="context",s="scheduler",l=A[I](null),pe=new t,f=new t,c=new t,p=new L,d=new N,de=/^\s*(.*?)\s+in\s+(.+)\s*$/,y=!0,_=e.resolve(),h={};[S,"pop","shift","unshift","splice","sort","reverse"][M](t=>{h[t]=function(){for(var e=[],r=0;r<arguments[$];r++)e[r]=arguments[r];y=!1;try{return P[F][t].apply(this,e)}finally{y=!0,m(this,$)}}});var ye=(e,r)=>{if("string"!=typeof r)return{value:r,context:e};if(-1===r[u]("."))return{value:e?e[r]:void 0,context:e};var t=p[W](r);t||(1e3<p.size&&p[i](),t=r[O]("."),p[q](r,t));for(var n=e,a=e,o=0;o<t[$];o++){var s=t[o];if(null==n)return{value:n,context:null};n=(a=n)[s]}return{value:n,context:a}},_e=e=>!d[D](e)&&d[z](e)&&!r&&(r=!0)&&_.then(()=>{d[M](e=>e()),d[i](),r=!1}),he=(e,r)=>{var t;n&&((t=f[W](e))||(t=new L,f[q](e,t)),(e=t[W](r))||(e=new N,t[q](r,e)),e[z](n),n[o][z](e))},m=(e,r)=>{var t,n;y&&(t=f[W](e))&&(n=t[W](r))&&n[M](e=>{e[s]?e[s](e):e()})},me=(r,e)=>{var t=()=>{t[o][M](e=>e[B](t)),t[o][i]();var e=n;n=t;try{r()}finally{n=e}};return t[o]=new N,t[s]=e,t(),()=>{t[o][M](e=>e[B](t)),t[o][i](),d[B](t)}},g=e=>{if(!e||typeof e!=ue||e._p||e instanceof a)return e;var r=c[W](e);if(r)return r;r=new Proxy(e,{get:(e,r,t)=>{if("_r"===r)return e;if("_p"===r)return!0;if(P[U](e)&&h[H](r))return h[r];he(e,r);t=T[W](e,r,t);return!t||typeof t!=ue||t instanceof a?t:g(t)},set:(e,r,t,n)=>{var a=e[r],o=P[U](e)?Number(r)<e[$]:A[F][H][R](e,r),n=T[q](e,r,t,n);return y&&(o?a!==t&&m(e,r):(m(e,r),P[U](e)&&m(e,$))),n},deleteProperty:(e,r)=>{var t=A[F][H][R](e,r),n=T.deleteProperty(e,r);return n&&t&&(m(e,r),P[U](e)&&m(e,$)),n}});return c[q](e,r),r},ge=g({}),we={text:(e,r)=>{e.textContent=null!=r?r:""},html:(e,r)=>{e.innerHTML=null!=r?r:""},value:(e,r)=>{e[Q]===ie?e[v]=!!r:"radio"===e[Q]&&e[V]?e[v]=e[C]==r:e[C]!=r&&(e[C]=null!=r?r:"")},attr:(e,r,t)=>{null==r||!1===r?e[G](t):e.setAttribute(t,!0===r?"":r)},class:(t,e)=>{"string"==typeof e&&e[O](/\s+/)[M](e=>{var r;e&&(e=(r="!"===e[0])?e[j](1):e,t.classList[r?ae:z](e))})},init:()=>{},destroy:()=>{}},xe=w=>{if(!w._m){w._m=1;var e=w[X]("s-data"),e=l[e];if(e){var x=g(e());x.$refs={},x.$root=w,x.$store=ge;var r=[],b=e=>{var r,t,n,a,o,s=e.target;for(!s._t||"input"!==e[Q]&&"change"!==e[Q]||(a=s._t,r=s._s||x,t=s[Q]===ie?s[v]:s[C],n=ye(r,a)[ce],-1===a[u](".")?r[a]=t:n&&(n[(a=a[O]("."))[a[$]-1]]=t));s&&s!==w[Y];){var i,l=pe[W](s);l&&(o=l[e[Q]])&&(i=s._s||x,i=(l=ye(i,o))[C],l=l[ce],typeof i==le&&i[R](l,e)),s=s[Y]}},E=(d,y,o)=>{if(1===d.nodeType&&!d[J]("s-ignore"))if(d!==w&&d[J]("s-data")){var e=xe(d);e&&o[S](e.unmount)}else{var t;if(t=d[X]("s-if")){var n,a=k[oe](""),s=[];return d[re](a),o[S](()=>{s[M](e=>e())}),o[S](me(()=>{var e=ye(y,t),r=e[C],e=e[ce];(typeof r==le?r[R](e,d):r)?n||((n=d[ne](!0))[G]("s-if"),E(n,y,s),a[Y][te](n,a)):n&&(s[M](e=>e()),s[$]=0,n[ae](),n=null)},_e))}if("TEMPLATE"===d[K]&&(t=d[X]("s-for"))){var r=t.match(de);if(!r)return;var e=r[1].replace(/[()]/g,""),i=r[2],e=e[O](","),_=e[0].trim(),h=e[1]?e[1].trim():null,m=d[X]("s-key"),l=k[oe]("");d[re](l);var g=new L;return o[S](()=>{g[M](e=>{e[ve][M](e=>e())})}),o[S](me(()=>{var f=ye(y,i)[C];P[U](f)&&he(f,$);var c=l,e=P[U](f)?f:f?A.keys(f):[],p=new L;e[M]((e,r)=>{var t,n=P[U](f)?r:e,a=P[U](f)?e:f[e],o=m&&a?a[m]:typeof a==ue&&a?a:n+"_"+a,r=g[W](o),e=e=>{A.defineProperty(e,_,{configurable:!0,enumerable:!0,get:()=>f[n],set:e=>{f[n]=e}})};if(r)e(r.scope),h&&(r.scope[h]=n);else{var a=d.content[ne](!0),s=(e=>{e=A[I](e);return new Proxy(e,{set:(e,r,t,n)=>{if(e[H](r))return T[q](e,r,t,n);for(var a=e;a&&!A[F][H][R](a,r);)a=A.getPrototypeOf(a);return T[q](a||e,r,t)}})})(y),i=[];e(s),h&&(s[h]=n);for(var l=[],u=a[ee];u;){l[S](u);var v=u[Z];E(u,s,i),u=v}r={nodes:l,scope:s,cleanups:i}}r[fe][0]!==c[Z]&&(t=k.createDocumentFragment(),r[fe][M](e=>t.appendChild(e)),c[Y][te](t,c[Z])),c=r[fe][r[fe][$]-1],p[q](o,r),g[B](o)}),g[M](e=>{e[ve][M](e=>e()),e[fe][M](e=>e[ae]())}),g=p},_e))}var u=d.attributes,v=!1;if(u&&0<u[$])for(var f=u[$]-1;0<=f;f--)(e=>{var t,r,n=e[V],a=e[C];":"===n[0]?o[S](me(()=>{var e=ye(y,a),r=e[C],t=e[ce],e="class"===n[j](1)?"class":"attr";we[e](d,typeof r==le?r[R](t,d):r,n[j](1))},_e)):"s"===n[0]&&"-"===n[1]&&("ref"===(t=n[j](2))?x.$refs[a]=d:"model"===t?(v=!0,o[S](me(()=>{var e=ye(y,a);we[C](d,e[C])},_e)),/^(INPUT|SELECT|TEXTAREA)$/.test(d[K])&&(d._t=a,r=d[Q]===ie||"radio"===d[Q]||"SELECT"===d[K]?"change":"input",w._e||(w._e=new N),w._e[D](r)||(w._e[z](r),w[se](r,b)))):we[t]?o[S](me(()=>{var e=ye(y,a),r=e[C],e=e[ce];we[t](d,typeof r==le?r[R](e,d):r)},_e)):(v=!0,(r=pe[W](d))||(r={},pe[q](d,r)),r[t]=a,w._e||(w._e=new N),w._e[D](t)||(w._e[z](t),w[se](t,b))))})(u[f]);v&&(d._s=y);for(var c=d[ee];c;){var p=c[Z];E(c,y,o),c=p}}};return E(w,x,r),x.init&&x.init(),{unmount:()=>{x.destroy&&x.destroy[R](x),r[M](e=>e()),w._e&&w._e[M](e=>{w.removeEventListener(e,b)}),w._m=0}}}}};return{data:(e,r)=>{l[e]=r},start:()=>{for(var e=k.querySelectorAll("[s-data]"),r=0;r<e[$];r++)xe(e[r])},store:(e,r)=>void 0===r?ge[e]:ge[e]=r,raw:e=>e&&e._r||e}})();export default spiki;
