var spiki=(()=>{var S=Object,T=Array,v=Reflect,e=Promise,a=Node,$=document,l=console,O="length",q="value",C="push",j="forEach",K="indexOf",M="split",B="slice",D="call",F="prototype",f="hasOwnProperty",p="getPrototypeOf",t="defineProperty",H="create",R="isArray",W="getAttribute",z="removeAttribute",G="hasAttribute",i="classList",I="tagName",J="type",Q="name",s="checked",U="parentNode",V="nextSibling",n="innerHTML",X="replaceWith",Y="insertBefore",Z="cloneNode",ee="remove",re="createTextNode",te="checkbox",ae="function",ne="object",oe="unshift",le="cleanups",se="nodes",o="deps",ie="destroy",ve="init",u=S[H](null),c=[],d=!1,h=null,_=!1,r=e.resolve(),fe=e=>{e._q||(e._q=!0,c[C](e),d||(d=!0,r.then(()=>{var e=c[B]();d=!(c=[]);for(var r=0;r<e[O];r++)e[r]._q=!1,e[r]()})))},pe=(e,r)=>{if(-1===r[K]("."))return{val:e[r],ctx:e};for(var t=r[M]("."),a=e,n=e,o=0;o<t[O];o++){if(null==a)return l.warn("Property undefined: "+r),{val:void 0,ctx:null};a=(n=a)[t[o]]}return{val:a,ctx:n}},y={};[C,"pop","shift",oe,"splice","sort","reverse"][j](e=>{y[e]=function(){_=!0;try{return T[F][e].apply(this,arguments)}finally{_=!1,m(this,O)}}});var ue=(e,r)=>{!h||-1===(r=(e=e._d||(S[t](e,"_d",{value:S[H](null),writable:!0}),e._d))[r]||(e[r]=[]))[K](h)&&(r[C](h),h[o][C](r))},m=(e,r)=>{if(!_&&e._d&&e._d[r])for(var t=e._d[r][B](),a=0;a<t[O];a++){var n=t[a];n.sched?n.sched(n):n()}},g=e=>{for(var r=0;r<e[o][O];r++){var t=e[o][r],a=t[K](e);-1!==a&&(t[a]=t[t[O]-1],t.pop())}e[o]=[]},ce=(r,e)=>{var t=()=>{g(t);var e=h;h=t;try{r()}finally{h=e}};return t[o]=[],t.sched=e,t(),()=>g(t)},de=e=>{if(!e||typeof e!=ne||e._y||e instanceof a)return e;if(e._p)return e._p;var r=new Proxy(e,{get:(e,r,t)=>"_y"===r||("_d"===r?e._d:T[R](e)&&y[f](r)?y[r]:(ue(e,r),!(t=v.get(e,r,t))||typeof t!=ne||t instanceof a?t:de(t))),set:(e,r,t,a)=>{var n=e[r],o=T[R](e),l=o?Number(r)<e[O]:S[F][f][D](e,r);if(!o&&!l)for(var s=S[p](e);s&&s!==S[F];){if(S[F][f][D](s,r)){var i=v.set(s,r,t);return _||t===n||m(e,r),i}s=S[p](s)}return i=v.set(e,r,t,a),!_&&i&&(l&&t===n||(m(e,r),o?m(e,O):l||m(e,"_k"))),i},deleteProperty:(e,r)=>{var t=S[F][f][D](e,r),a=v.deleteProperty(e,r);return a&&t&&(m(e,r),T[R](e)?m(e,O):m(e,"_k")),a},ownKeys:e=>(ue(e,"_k"),v.ownKeys(e))});return S[t](e,"_p",{value:r,enumerable:!1}),r},x=de({}),he={text:(e,r)=>{e.textContent=null==r?"":r},html:(e,r)=>{e[n]!=r&&(e[n]=null==r?"":r)},value:(e,r)=>{e[J]===te?e[s]=!!r:"radio"===e[J]?e[s]=e[q]==r:e[q]!=r&&(e[q]=null==r?"":r)},attr:(e,r,t)=>{null==r||!1===r?e[z](t):e.setAttribute(t,!0===r?"":r)},class:(e,r)=>{if("string"==typeof r)for(var t=r.match(/\S+/g)||[],a=0;a<t[O];a++){var n=t[a];"!"===n[0]?e[i][ee](n[B](1)):e[i].add(n)}else if(r)for(var o in r){var l=!!r[o];if(-1!==o[K](" "))for(var t=o[M](/\s+/),s=0;s<t[O];s++)t[s]&&e[i].toggle(t[s],l);else e[i].toggle(o,l)}},effect:()=>{}},_e=(k,e)=>{if(!k._m){var r=k[W]("s-data");if(u[r]){k._m=!0,r=u[r](),e&&S.setPrototypeOf(r,e);var E=de(r);E.$refs={},E.$root=k,E.$store=x,E.$parent=e;var t=[],a=S[H](null),n=e=>{for(var r=e.target;r&&r!==k[U];){var t=r._h&&r._h[e[J]];if(t)for(var a=0;a<t[O];a++){var n,o,l=t[a];l.model?(n=r[J]===te?r[s]:r[q],(o=pe(r._s,l.path)).ctx&&(o.ctx[o.ctx===r._s?l.path:l.path[M](".").pop()]=n)):typeof(o=pe(r._s,l.path)).val==ae&&o.val[D](o.ctx,e)}r=r[U]}},N=e=>{a[e]||(a[e]=!0,k.addEventListener(e,n))},L=(_,y,t)=>{if(1===_.nodeType&&!_[G]("s-ignore"))if(_!==k&&_[G]("s-data"))(r=_e(_,y))&&t[C](r.unmount);else{var e=_[W]("s-if"),r=!e&&"TEMPLATE"===_[I]&&_[W]("s-for"),a=[];if(e){var m=$[re](""),n=null,o=[];_[X](m);var l="!"===e[0],s=l?e[B](1):e;return t[C](()=>{o[j](e=>e())}),t[C](ce(()=>{var e=pe(y,s).val;l&&(e=!e),e?n||((n=_[Z](!0))[z]("s-if"),L(n,y,o),m[U][Y](n,m)):n&&(o[j](e=>e()),o=[],n[ee](),n=null)},fe))}if(r&&(e=r.match(/^\s*(.*?)\s+in\s+(.+)\s*$/))){var g,x=(r=e[1][M](",").map(e=>e.trim().replace(/[()]/g,"")))[0],b=r[1],P=e[2].trim(),w=_[W]("s-key"),m=$[re](""),A=S[H](null);return _[X](m),t[C](()=>{for(var e in A)A[e][le][j](e=>e())}),t[C](ce(()=>{var e=pe(y,P).val||[];T[R](e)&&ue(e,O);var r=$.createDocumentFragment(),t=m;g=S[H](null);for(var a=T[R](e),n=a?e:S.keys(e),o=(a?e:n)[O],l=0;l<o;l++){var s=a?l:n[l],i=a?e[l]:e[s],v=null==i||typeof i!=ne?String(i):w?pe(i,w).val:String(s)+"_o";g[v]&&(v+="_"+l);var f=A[v];if(f)f.scope[x]=i,b&&(f.scope[b]=s);else{var p=_.content[Z](!0),u=de(S[H](y));u[x]=i,b&&(u[b]=s);for(var c=T[F][B][D](p.childNodes),d=[],h=0;h<c[O];h++)L(c[h],u,d);f={nodes:c,scope:u,cleanups:d},A[v]=f}if(f[se][0]!==t[V]){for(h=0;h<f[se][O];h++)r.appendChild(f[se][h]);t[U][Y](r,t[V])}t=f[se][f[se][O]-1],g[v]=!0}for(s in A)if(!g[s]){for(A[s][le][j](e=>e()),h=0;h<A[s][se][O];h++)A[s][se][h][ee]();delete A[s]}},fe))}if(_.hasAttributes())for(var i=_.attributes,v=0;v<i[O];v++){var f,p,u=i[v][Q],c=i[v][q];":"===u[0]?(f=u[B](1),p="!"===c[0],a[C]({type:"attr",name:f,path:p?c[B](1):c,neg:p})):0===u[K]("s-")&&((p=u[B](2))===ve||p===ie?(e=>{var r=pe(y,c);typeof r.val==ae&&(e===ve?fe(()=>r.val[D](r.ctx,_)):t[C](()=>r.val[D](r.ctx,_)))})(p):"model"===p?(a[C]({type:q,path:c}),_._s=y,_._h=_._h||{},u=_[J]===te||"radio"===_[J]||"SELECT"===_[I]?"change":"input",(_._h[u]=_._h[u]||[])[oe]({model:!0,path:c}),N(u)):"ref"===p?E.$refs[c]=_:he[p]?a[C]({type:p,path:c}):(_._s=y,_._h=_._h||{},(_._h[p]=_._h[p]||[])[C]({path:c}),N(p)))}a[O]&&t[C](ce(()=>{for(var e=0;e<a[O];e++){var r=a[e],t=(t=pe(y,r.path)).val&&typeof t.val==ae?t.val[D](t.ctx,_):t.val;"attr"===r[J]?(r.neg&&(t=!t),"class"===r[Q]?he.class(_,t):he.attr(_,t,r[Q])):he[r[J]](_,t)}},fe));for(var d=_.firstChild;d;){var h=d[V];L(d,y,t),d=h}}};return L(k,E,t),E[ve]&&E[ve](),{unmount:()=>{for(var e in E[ie]&&E[ie][D](E),t[j](e=>e()),a)k.removeEventListener(e,n);k._m=!1}}}}};return{data:(e,r)=>{u[e]=r},start:()=>{for(var e=$.querySelectorAll("[s-data]"),r=0;r<e[O];r++)_e(e[r])},store:(e,r)=>void 0===r?x[e]:x[e]=r,raw:e=>e&&e._p||e}})();export default spiki;
