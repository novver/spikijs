var spiki=(()=>{var j=Object,q=Array,t=Proxy,f=Reflect,S=String,e=Promise,o=Node,c=Number,D=document,i=console,F="length",K="value",M="push",B="forEach",H="indexOf",R="split",W="slice",z="call",l="get",G="prototype",s="hasOwnProperty",u="getPrototypeOf",I="defineProperty",J="create",Q="isArray",U="getAttribute",V="removeAttribute",X="hasAttribute",Y="tagName",Z="type",ee="name",_="checked",re="parentNode",te="nextSibling",a="textContent",n="innerHTML",ae="replaceWith",ne="insertBefore",oe="cloneNode",ie="remove",le="createTextNode",ve="addEventListener",fe="input",se="checkbox",ue="function",pe="class",ce="object",_e="unshift",de="trim",ye="cleanups",he="nodes",v="deps",me="className",ge="destroy",be="init",xe="charCodeAt",p="sched",d="string",Pe="unmount",we="attr",y="$root",h=j[J](null),m=[],g=!1,b=null,x=!1,r=e.resolve(),P={blur:1,focus:1,scroll:1,load:1,error:1,mouseenter:1,mouseleave:1,toggle:1},Ae=e=>{e._q||(e._q=!0,m[M](e),g||(g=!0,r.then(()=>{var e=m;g=!(m=[]);for(var r=e[F];r--;)e[r]._q=!1,e[r]()})))},ke=(e,r)=>{var t,a=e;if(typeof r==d)t=e?e[r]:void 0;else{for(var n=0,o=r[F];n<o-1&&a;)a=a[r[n++]];t=a?a[r[o-1]]:void 0}return void 0===t&&(e=q[Q](r)?r.join("."):r,i.warn("[spikijs] Property undefined: "+e)),{ctx:a,val:t}},w={};[M,"pop","shift",_e,"splice","sort","reverse"][B](r=>{w[r]=function(...e){x=!0;try{return q[G][r].apply(this,e)}finally{x=!1,A(this,F)}}});var Ne=(e,r)=>{!b||-1===(r=(e=e._d||(j[I](e,"_d",{value:j[J](null),writable:!0}),e._d))[r]||(e[r]=[]))[H](b)&&(r[M](b),b[v][M](r))},A=(e,r)=>{if(!x&&e._d&&e._d[r])for(var t=e._d[r][W](),a=0,n=t[F];a<n;a++){var o=t[a];o[p]?o[p](o):o()}},k=e=>{for(var r=e[v][F];r--;){var t=e[v][r],a=t[H](e);-1!==a&&(t[a]=t[t[F]-1],t.pop())}e[v]=[]},Ee=(r,e)=>{var t=()=>{k(t);var e=b;b=t;try{r()}finally{b=e}};return t[v]=[],t[p]=e,t(),()=>k(t)},Te=e=>{if(!e||typeof e!=ce||e._y||e instanceof o)return e;if(e._p)return e._p;var r=new t(e,{get:(e,r,t)=>{if("_y"===r)return!0;if("_t"===r)return e;if("_d"===r)return e._d;if("_i"===r)return e._i;if(q[Q](e)&&w[s](r))return w[r];var a=j.getOwnPropertyDescriptor(e,r);if(a&&a[l]){var n="_"+r;return n in e||Ee(()=>t[n]=a[l][z](t)),t[n]}return Ne(e,r),!(r=f[l](e,r,t))||typeof r!=ce||r instanceof o?r:Te(r)},set:(e,r,t,a)=>{var n=e[r],o=q[Q](e),i=o?c(r)<e[F]:j[G][s][z](e,r);if(e._i&&!i)for(var l=j[u](e);l&&l!==j[G];){if(j[G][s][z](l,r)){var v=f.set(l,r,t);return x||t===n||A(e,r),v}l=j[u](l)}return v=f.set(e,r,t,a),!x&&v&&(i&&t===n||(A(e,r),o?A(e,F):i||A(e,"_k"))),v},deleteProperty:(e,r)=>{var t=j[G][s][z](e,r),a=f.deleteProperty(e,r);return a&&t&&(A(e,r),q[Q](e)?A(e,F):A(e,"_k")),a},ownKeys:e=>(Ne(e,"_k"),f.ownKeys(e))});return j[I](e,"_p",{value:r}),r},N=Te({}),Oe=j[J](null);Oe.text=(e,r)=>{r=null==r?"":r,e[a]!==S(r)&&(e[a]=r)},Oe.html=(e,r)=>{e[n]!=r&&(e[n]=null==r?"":r)},Oe[K]=(e,r)=>{e[Z]===se?e[_]=!!r:"radio"===e[Z]?e[_]=e[K]==r:e[K]!=r&&(e[K]=null==r?"":r)},Oe[we]=(e,r,t)=>{null==r||!1===r?e[V](t):(r=!0===r?"":S(r),e[U](t)!==r&&e.setAttribute(t,r))},Oe[pe]=(e,r)=>{var t=e._n||"",a="";if(typeof r==d)a=r;else if(r)for(var n in r)r[n]&&(a+=(a?" ":"")+n);t=t+(t&&a?" ":"")+a,e[me]!==t&&(e[me]=t)};var Ce=(T,e)=>{if(T._m)return T._m;var r=T[U]("s-data");if(h[r]){r=h[r](),e&&j.setPrototypeOf(r,e);var O=Te(r);O.$refs={},O[y]=T,O.$store=N,O.$parent=e;var t=[],a=j[J](null),C=e=>{var r=e.target;if(e[Z]!==fe||!r._c)for(var t=T[re],a=e[Z];r&&r!==t;){var n=r._h&&r._h[a];if(n){var o=r._s;if(!o||o[y]!==O[y]){r=r[re];continue}for(var i=n[F];i--;){var l=n[i],v=l.p;if(l.model){var f=r[Z]===se?r[_]:r[K];if(typeof f!=d||(l=f[de]())&&isFinite(l)&&(48===l[xe](0)&&1!==l[F]&&46!==l[xe](1)||(f=c(l))),typeof v==d)o&&(o[v]=f);else{for(var s=o,u=0,p=v[F]-1;u<p&&s;)s=s[v[u++]];s&&(s[v[p]]=f)}}else typeof(f=ke(o,v)).val==ue&&(j[I](e,"currentTarget",{configurable:!0,value:r}),f.val[z](f.ctx,e))}}r=r[re]}},L=e=>{a[e]||(a[e]=!0,T[ve](e,C,!!P[e]))},$=(m,g,t)=>{if(1===m.nodeType&&!m[X]("s-ignore"))if(m!==T&&m[X]("s-data"))(e=Ce(m,g))&&t[M](e[Pe]);else{var e=!(v=m[U]("s-if"))&&"TEMPLATE"===m[Y]&&m[U]("s-for"),a=[];if(m[X](pe)&&!m._n&&(m._n=m[me]),v){var b=D[le](""),r=null,n=[];m[ae](b);var o="!"===v[0],i=-1===(l=o?v[W](1):v)[H](".")?l:l[R](".");return t[M](()=>{n[B](e=>e())}),t[M](Ee(()=>{var e=ke(g,i).val;o&&(e=!e),e?r||((r=m[oe](!0))[V]("s-if"),$(r,g,n),b[re][ne](r,b)):r&&(n[B](e=>e()),n=[],r[ie](),r=null)},Ae))}if(e&&-1!==(v=e[H](" in "))){var x,l=e[W](0,v)[de](),v=e[W](v+4)[de](),P=(l=l.replace(/[()]/g,"")[R](","))[0][de](),w=l[1]?l[1][de]():null,A=-1===v[H](".")?v:v[R]("."),k=(v=m[U]("s-key"))?-1===v[H](".")?v:v[R]("."):null,b=D[le](""),N=j[J](null);return m[ae](b),t[M](()=>{for(var e in N)N[e][ye][B](e=>e())}),t[M](Ee(()=>{var e=ke(g,A).val||[];q[Q](e)&&Ne(e,F);var r=D.createDocumentFragment(),t=b;x=j[J](null);for(var a,n=q[Q](e),o=n?e:j.keys(e),i=(n?e:o)[F],l=0;l<i;l++){var v=n?l:o[l],f=n?e[l]:e[v],s=null==f||typeof f!=ce?S(f):k?ke(f,k).val:S(v)+"_o";x[s]&&(s+="_"+l);var u=N[s];if(u)u.scope[P]=f,w&&(u.scope[w]=v);else{var p=m.content[oe](!0),c=j[J](g);j[I](c,"_i",{value:!0});var _=Te(c);_[P]=f,w&&(_[w]=v);for(var d=q[G][W][z](p.childNodes),y=[],h=0;h<d[F];h++)$(d[h],_,y);u={nodes:d,scope:_,cleanups:y},N[s]=u}if(u[he][0]!==t[te]){for(h=0;h<u[he][F];h++)r.appendChild(u[he][h]);t[re][ne](r,t[te])}t=u[he][u[he][F]-1],x[s]=!0}for(a in N)x[a]||(N[a][ye][B](e=>e()),N[a][he][B](e=>e[ie]()),delete N[a])},Ae))}if(m.hasAttributes())for(var f=m.attributes,s=f[F];s--;){var u,p,c,_=f[s],d=_[ee],y=_[K];58===d[xe](0)?(u=d[W](1),_=(p=33===y[xe](0))?y[W](1):y,i=-1===_[H](".")?_:_[R]("."),a[M]({type:we,name:u,path:i,neg:p})):115===d[xe](0)&&45===d[xe](1)&&(p=d[W](2),c=-1===y[H](".")?y:y[R]("."),p===be||p===ge?(e=>{var r=ke(g,c);typeof r.val==ue&&(e===be?Ae(()=>{var e=r.val[z](r.ctx,m);typeof e==ue&&t[M](e)}):t[M](()=>r.val[z](r.ctx,m)))})(p):"effect"===p?t[M](Ee(()=>{var e=ke(g,c);typeof e.val==ue&&e.val[z](e.ctx,m)},Ae)):"model"===p?(a[M]({type:K,path:c}),m._s=g,m._h=m._h||{},(d=m[Z]===se||"radio"===m[Z]||"SELECT"===m[Y]?"change":fe)==fe&&(m[ve]("compositionstart",()=>m._c=!0),m[ve]("compositionend",()=>{m._c=!1,C({target:m,type:fe})})),(m._h[d]=m._h[d]||[])[_e]({model:!0,p:c}),L(d)):"ref"===p?O.$refs[y]=m:Oe[p]?a[M]({type:p,path:c}):(m._s=g,m._h=m._h||{},(m._h[p]=m._h[p]||[])[M]({p:c}),L(p)))}a[F]&&t[M](Ee(()=>{for(var e=a[F];e--;){var r=a[e],t=typeof(t=ke(g,r.path)).val==ue?t.val[z](t.ctx,m):t.val;r[Z]===we?(r.neg&&(t=!t),r[ee]===pe?Oe[pe](m,t):Oe[we](m,t,r[ee])):Oe[r[Z]](m,t)}},Ae));for(var h=m.firstChild;h;){var E=h[te];$(h,g,t),h=E}}};return $(T,O,t),O[be]&&O[be](),e={unmount:()=>{for(var e in O[ge]&&O[ge][z](O),t[B](e=>e()),a)T.removeEventListener(e,C);T._m=null}},T._m=e}};return{data:(e,r)=>{h[e]=r},start:()=>{for(var e=D.querySelectorAll("[s-data]"),r=e[F];r--;)Ce(e[r])},store:(e,r)=>void 0===r?N[e]:N[e]=r,raw:e=>e&&e._t||e,mount:e=>Ce(e),unmount:e=>{e&&e._m&&e._m[Pe]()}}})();export default spiki;
